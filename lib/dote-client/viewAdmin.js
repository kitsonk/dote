//>>built
require({cache:{"dojo/store/Cache":function(){define(["../_base/lang","../when"],function(r,k){var e=function(d,a,e){e=e||{};return r.delegate(d,{query:function(v,h){var u=d.query(v,h);u.forEach(function(g){(!e.isLoaded||e.isLoaded(g))&&a.put(g)});return u},queryEngine:d.queryEngine||a.queryEngine,get:function(e,h){return k(a.get(e),function(u){return u||k(d.get(e,h),function(g){g&&a.put(g,{id:e});return g})})},add:function(e,h){return k(d.add(e,h),function(d){a.add(e&&"object"==typeof d?d:e,h);return d})},
put:function(e,h){a.remove(h&&h.id||this.getIdentity(e));return k(d.put(e,h),function(d){a.put(e&&"object"==typeof d?d:e,h);return d})},remove:function(e,h){return k(d.remove(e,h),function(d){return a.remove(e,h)})},evict:function(d){return a.remove(d)}})};r.setObject("dojo.store.Cache",e);return e})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(r,k,e){return r("dojo.store.Memory",null,{constructor:function(d){for(var a in d)this[a]=
d[a];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:e,get:function(d){return this.data[this.index[d]]},getIdentity:function(d){return d[this.idProperty]},put:function(d,a){var e=this.data,k=this.index,h=this.idProperty,h=d[h]=a&&"id"in a?a.id:h in d?d[h]:Math.random();if(h in k){if(a&&!1===a.overwrite)throw Error("Object already exists");e[k[h]]=d}else k[h]=e.push(d)-1;return h},add:function(d,a){(a=a||{}).overwrite=!1;return this.put(d,a)},remove:function(d){var a=
this.index,e=this.data;if(d in a)return e.splice(a[d],1),this.setData(e),!0},query:function(d,a){return k(this.queryEngine(d,a)(this.data))},setData:function(d){d.items?(this.idProperty=d.identifier,d=this.data=d.items):this.data=d;this.index={};for(var a=0,e=d.length;a<e;a++)this.index[d[a][this.idProperty]]=a}})})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(r){return function(k,e){function d(a){a=r.filter(a,k);var d=e&&e.sort;d&&a.sort("function"==typeof d?
d:function(a,g){for(var n,c=0;n=d[c];c++){var z=a[n.attribute],f=g[n.attribute];if(z!=f)return!!n.descending==(null==z||z>f)?-1:1}return 0});if(e&&(e.start||e.count)){var h=a.length;a=a.slice(e.start||0,(e.start||0)+(e.count||Infinity));a.total=h}return a}switch(typeof k){default:throw Error("Can not query with a "+typeof k);case "object":case "undefined":var a=k;k=function(d){for(var e in a){var h=a[e];if(h&&h.test){if(!h.test(d[e],d))return!1}else if(h!=d[e])return!1}return!0};break;case "string":if(!this[k])throw Error("No filter function "+
k+" was found in store");k=this[k];case "function":}d.matches=k;return d}})},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(r,k,e,d){r=function(a){function t(n,c){var z=a[n];z&&(a[n]=function(f){if(g)return z.apply(this,arguments);g=!0;try{var s=z.apply(this,arguments);e(s,function(m){c("object"==typeof m&&m||f)});return s}finally{g=!1}})}var r=[],h=0;a=k.delegate(a);a.notify=function(n,c){h++;for(var a=r.slice(),f=0,s=a.length;f<
s;f++)a[f](n,c)};var u=a.query;a.query=function(n,c){c=c||{};var z=u.apply(this,arguments);if(z&&z.forEach){var f=k.mixin({},c);delete f.start;delete f.count;var s=a.queryEngine&&a.queryEngine(n,f),m=h,b=[],x;z.observe=function(f,n){1==b.push(f)&&r.push(x=function(f,q){e(z,function(l){var x=l.length!=c.count,A,z;if(++m!=h)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var g,e=-1,y=-1;if(void 0!==q){A=0;for(z=l.length;A<z;A++){var u=l[A];if(a.getIdentity(u)==
q){g=u;e=A;(s||!f)&&l.splice(A,1);break}}}if(s){if(f&&(s.matches?s.matches(f):s([f]).length))A=-1<e?e:l.length,l.splice(A,0,f),y=d.indexOf(s(l),f),l.splice(A,1),c.start&&0==y||!x&&y==l.length?y=-1:l.splice(y,0,f)}else f&&(void 0!==q?y=e:c.start||(y=a.defaultIndex||0,l.splice(y,0,f)));if((-1<e||-1<y)&&(n||!s||e!=y)){x=b.slice();for(A=0;l=x[A];A++)l(f||g,e,y)}})});var q={};q.remove=q.cancel=function(){var c=d.indexOf(b,f);-1<c&&(b.splice(c,1),b.length||r.splice(d.indexOf(r,x),1))};return q}}return z};
var g;t("put",function(n){a.notify(n,a.getIdentity(n))});t("add",function(n){a.notify(n)});t("remove",function(n){a.notify(void 0,n)});return a};k.setObject("dojo.store.Observable",r);return r})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html".split(" "),function(r,k,e,d,a,t,v,h,u,g){r=k("dijit.form.Button"+(d("dojo-bidi")?"_NoBidi":""),[h,u],{showLabel:!0,
iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:g,_setValueAttr:"valueNode",_setNameAttr:function(n){this.valueNode&&this.valueNode.setAttribute("name",n)},_fillContent:function(n){if(n&&(!this.params||!("label"in this.params)))if(n=t.trim(n.innerHTML))this.label=n},_setShowLabelAttr:function(n){this.containerNode&&e.toggle(this.containerNode,"dijitDisplayNone",!n);this._set("showLabel",n)},setLabel:function(n){a.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",n)},_setLabelAttr:function(n){this.inherited(arguments);!this.showLabel&&!("title"in this.params)&&(this.titleNode.title=t.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});d("dojo-bidi")&&(r=k("dijit.form.Button",r,{_setLabelAttr:function(n){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(n){this._created&&this.textDir!=n&&(this._set("textDir",n),this._setLabelAttr(this.label))}}));
return r})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(r,k,e,d,a,t,v,h){return r("dijit.form._FormWidget",[a,v,t,h],{setDisabled:function(a){e.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0");this.set("disabled",a)},setValue:function(a){e.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use set('value',"+
a+") instead.","","2.0");this.set("value",a)},getValue:function(){e.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!k("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)},_setTypeAttr:null})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),
function(r,k,e,d,a,t,v,h,u,g){return k("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(n){this._set("disabled",n);e.set(this.focusNode,"disabled",n);this.valueNode&&e.set(this.valueNode,"disabled",n);this.focusNode.setAttribute("aria-disabled",n?"true":"false");n?(this._set("hovering",!1),this._set("active",
!1),n="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",r.forEach(a.isArray(n)?n:[n],function(c){c=this[c];h("webkit")||g.hasDefaultTabStop(c)?c.setAttribute("tabIndex","-1"):c.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(n){if("mouse"==n&&this.isFocusable())var c=this.own(v(this.focusNode,"focus",function(){z.remove();c.remove()}))[0],z=this.own(v(this.ownerDocumentBody,
"mouseup, touchend",a.hitch(this,function(f){z.remove();c.remove();this.focused&&("touchend"==f.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){u.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=d.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,c){return"number"==typeof a&&"number"==typeof c?
isNaN(a)&&isNaN(c)?0:a-c:a>c?1:a<c?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,c){if(void 0==this._lastValueReported&&(null===c||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);if((this.intermediateChanges||c||void 0===c)&&this._pendingOnChange)this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&
this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)}))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(r,k,e,d){var a=r("dijit.form._ButtonMixin"+(e("dojo-bidi")?
"_NoBidi":""),null,{label:"",type:"button",__onClick:function(a){a.stopPropagation();a.preventDefault();this.disabled||this.valueNode.click(a);return!1},_onClick:function(a){if(this.disabled)return a.stopPropagation(),a.preventDefault(),!1;!1===this.onClick(a)&&a.preventDefault();cancelled=a.defaultPrevented;if(!cancelled&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var e=this.domNode;e.parentNode;e=e.parentNode){var h=d.byNode(e);if(h&&"function"==typeof h._onSubmit){h._onSubmit(a);
a.preventDefault();cancelled=!0;break}}return!cancelled},postCreate:function(){this.inherited(arguments);k.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(a){this._set("label",a);(this.containerNode||this.focusNode).innerHTML=a}});e("dojo-bidi")&&(a=r("dijit.form._ButtonMixin",a,{_setLabelAttr:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return a})},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare",
"./Grid","./OnDemandList"],function(r,k,e){return r([k,e],{})})},"dgrid/Grid":function(){define("dojo/_base/kernel dojo/_base/declare dojo/on dojo/has put-selector/put ./List ./util/misc dojo/_base/sniff".split(" "),function(r,k,e,d,a,t,v){function h(c,a){a&&a.nodeType&&c.appendChild(a)}function u(c,a,f,s){if(this.formatter){s=this.formatter;var m=this.grid.formatterScope;f.innerHTML="string"===typeof s&&m?m[s](a,c):s(a,c)}else null!=a&&f.appendChild(document.createTextNode(a))}var g=8>d("ie")&&!0,
n=/[^\._a-zA-Z0-9-]/g;k=k(t,{columns:null,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(c){return"string"==typeof c?this.columns[c]:this.cell(c).column},listType:"grid",cell:function(c,a){if(c.column&&c.element)return c;c.target&&c.target.nodeType&&(c=c.target);var f;if(c.nodeType){do{if(this._rowIdToObject[c.id])break;var s=c.columnId;if(s){a=s;f=c;break}c=c.parentNode}while(c&&c!=this.domNode)}if(!f&&"undefined"!=typeof a){var m=this.row(c);if(s=m.element)for(var s=s.getElementsByTagName("td"),
b=0;b<s.length;b++)if(s[b].columnId==a){f=s[b];break}}if(null!=c)return{row:m||this.row(c),column:a&&this.column(a),element:f}},createRowCells:function(c,e,f){var s=a("table.dgrid-row-table[role\x3dpresentation]"),m=9>d("ie")?a(s,"tbody"):s,b,x,y,h,q,p,C,l,w,A;f=f||this.subRows;x=0;for(y=f.length;x<y;x++){p=f[x];b=a(m,"tr");p.className&&a(b,"."+p.className);h=0;for(q=p.length;h<q;h++){C=p[h];l=C.id;w=C.className||C.field&&"field-"+C.field;w=a(c+(".dgrid-cell.dgrid-cell-padding"+(l?".dgrid-column-"+
l:"")+(w?"."+w:"")).replace(n,"-")+"[role\x3d"+("th"===c?"columnheader":"gridcell")+"]");w.columnId=l;g?(l=a(w,"!dgrid-cell-padding div.dgrid-cell-padding"),w.contents=l):l=w;if(A=C.colSpan)w.colSpan=A;if(A=C.rowSpan)w.rowSpan=A;e(l,C);b.appendChild(w)}}return s},left:function(c,a){c.element||(c=this.cell(c));return this.cell(this._move(c,-(a||1),"dgrid-cell"))},right:function(c,a){c.element||(c=this.cell(c));return this.cell(this._move(c,a||1,"dgrid-cell"))},renderRow:function(c,g){var f=this.createRowCells("td",
function(f,a){var b=c;a.get?b=a.get(c):"field"in a&&"_item"!=a.field&&(b=b[a.field]);a.renderCell?h(f,a.renderCell(c,b,f,g)):u.call(a,c,b,f,g)},g&&g.subRows);return a("div[role\x3drow]\x3e",f)},renderHeader:function(){var c=this,d=this.headerNode,f=d.childNodes.length;for(d.setAttribute("role","row");f--;)a(d.childNodes[f],"!");f=this.createRowCells("th",function(c,a){var b=a.headerNode=c;g&&(c=c.parentNode);var f=a.field;f&&(c.field=f);if(a.renderHeaderCell)h(b,a.renderHeaderCell(b));else if(a.label||
a.field)b.appendChild(document.createTextNode(a.label||a.field));!1!==a.sortable&&(f&&"_item"!=f)&&(c.sortable=!0,c.className+=" dgrid-sortable")},this.subRows&&this.subRows.headerRows);this._rowIdToObject[f.id=this.id+"-header"]=this.columns;d.appendChild(f);this._sortListener&&this._sortListener.remove();this._sortListener=e(f,"click,keydown",function(a){if("click"==a.type||32==a.keyCode||13==a.keyCode){var f=a.target,b,x,g;do if(f.sortable){g=[{attribute:b=f.field||f.columnId,descending:(x=c._sort[0])&&
x.attribute==b&&!x.descending}];a={bubbles:!0,cancelable:!0,grid:c,parentType:a.type,sort:g};e.emit(f,"dgrid-sort",a)&&(c._sortNode=f,c.set("sort",g));break}while((f=f.parentNode)&&f!=d)}})},resize:function(){var c=this.headerNode.firstChild,a=this.contentNode,f;this.inherited(arguments);if(!d("ie")||7<d("ie"))if(a.style.width="",a&&c&&(f=c.offsetWidth)!=a.offsetWidth)a.style.width=f+"px"},destroy:function(){this._destroyColumns();this._sortListener&&this._sortListener.remove();this.inherited(arguments)},
_setSort:function(c,a){this.inherited(arguments);this.updateSortArrow(this._sort)},updateSortArrow:function(c,g){this._lastSortedArrow&&(a(this._lastSortedArrow,"\x3c!dgrid-sort-up!dgrid-sort-down"),a(this._lastSortedArrow,"!"),delete this._lastSortedArrow);g&&(this._sort=c);if(c[0]){var f=c[0].attribute,d=c[0].descending,m=this._sortNode,b,x,e;delete this._sortNode;if(!m)for(e in b=this.columns,b)if(x=b[e],x.field==f){m=x.headerNode;break}m&&(m=m.contents||m,this._lastSortedArrow=a(m.firstChild,
"-div.dgrid-sort-arrow.ui-icon[role\x3dpresentation]"),this._lastSortedArrow.innerHTML="\x26nbsp;",a(m,d?".dgrid-sort-down":".dgrid-sort-up"),this.resize())}},styleColumn:function(c,a){return this.addCssRule("#"+v.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+c,a)},_configColumns:function(c,a){var f=[],g=a instanceof Array,d,b;for(d in a)b=a[d],"string"==typeof b&&(a[d]=b={label:b}),!g&&!b.field&&(b.field=d),d=b.id=b.id||(isNaN(d)?d:c+d),g&&(this.columns[d]=b),this._configColumn&&this._configColumn(b,
d,a,c),b.grid=this,"function"===typeof b.init&&b.init(),f.push(b);return g?a:f},_destroyColumns:function(){var a=this.subRows,g=a&&a.length,f,d,e,b;this.cleanup();for(f=0;f<g;f++){d=0;for(b=a[f].length;d<b;d++)e=a[f][d],"function"===typeof e.destroy&&e.destroy()}},configStructure:function(){var a=this.subRows,d=this._columns=this.columns;this.columns=!d||d instanceof Array?{}:d;if(a)for(d=0;d<a.length;d++)a[d]=this._configColumns(d+"-",a[d]);else this.subRows=[this._configColumns("",d)]},_getColumns:function(){return this._columns||
this.columns},_setColumns:function(a){this._destroyColumns();this.subRows=null;this.columns=a;this._updateColumns()},_setSubRows:function(a){this._destroyColumns();this.subRows=a;this._updateColumns()},setColumns:function(a){r.deprecated("setColumns(...)",'use set("columns", ...) instead',"dgrid 1.0");this.set("columns",a)},setSubRows:function(a){r.deprecated("setSubRows(...)",'use set("subRows", ...) instead',"dgrid 1.0");this.set("subRows",a)},_updateColumns:function(){this.configStructure();this.renderHeader();
this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this._started&&(this._sort&&this._sort.length?this.updateSortArrow(this._sort):this.resize())}});k.appendIfNode=h;k.defaultRenderCell=u;return k})},"put-selector/put":function(){(function(r){var k,e=/[-+,> ]/;r([],k=function(d,a){function r(a){function c(){b&&(m&&b!=m)&&(m==a&&(k||(k=e.test(q)&&d.createDocumentFragment()))||m).insertBefore(b,s||null)}for(var k,f,s,m,b,x=arguments,y=x[0],D=0;D<x.length;D++){var q=x[D];if("object"==
typeof q){f=!1;if(q instanceof Array){b=d.createDocumentFragment();for(var p=0;p<q.length;p++)b.appendChild(r(q[p]));q=b}if(q.nodeType)b=q,c(),m=q,s=0;else for(p in q)b[p]=q[p]}else if(f)f=!1,b.appendChild(d.createTextNode(q));else{1>D&&(a=null);f=!0;if(y=q.replace(v,function(f,l,e,p,y,B){l&&(c(),"-"==l||"+"==l?(m=(s=b||m).parentNode,b=null,"+"==l&&(s=s.nextSibling)):("\x3c"==l?m=b=(b||m).parentNode:(","==l?m=a:b&&(m=b),b=null),s=0),b&&(m=b));if((f=!e&&p)||!b&&(e||y))"$"==f?(f=x[++D],m.appendChild(d.createTextNode(f))):
(f=f||r.defaultTag,(l=g&&x[D+1]&&x[D+1].name)&&(f="\x3c"+f+' name\x3d"'+l+'"\x3e'),b=u&&~(h=f.indexOf("|"))?d.createElementNS(u[f.slice(0,h)],f.slice(h+1)):d.createElement(f));if(e)if("$"==p&&(p=x[++D]),"#"==e)b.id=p;else if(l=(f=b.className)&&(" "+f+" ").replace(" "+p+" "," "),"."==e)b.className=f?(l+p).substring(1):p;else if("!"==q){var k;g?r("div",b,"\x3c").innerHTML="":(k=b.parentNode)&&k.removeChild(b)}else l=l.substring(1,l.length-1),l!=f&&(b.className=l);y&&("$"==B&&(B=x[++D]),"style"==y?b.style.cssText=
B:(e="!"==y.charAt(0)?(y=y.substring(1))&&"removeAttribute":"setAttribute",B=""===B?y:B,u&&~(h=y.indexOf("|"))?b[e+"NS"](u[y.slice(0,h)],y.slice(h+1),B):b[e](y,B)));return""}))throw new SyntaxError("Unexpected char "+y+" in "+q);c();m=y=b||m}}a&&k&&a.appendChild(k);return y}e=a||e;var v=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,h,u=!1;d=d||document;var g="object"==typeof d.createElement;r.addNamespace=function(a,c){d.createElementNS?(u||(u={}))[a]=c:
d.namespaces.add(a,c)};r.defaultTag="div";r.forDocument=k;return r})})(function(r,k,e){e=e||k;"function"===typeof define?define([],function(){return e()}):"undefined"==typeof window?require("./node-html")(module,e):put=e()})},"dgrid/List":function(){define("dojo/_base/kernel dojo/_base/declare dojo/on dojo/has ./util/misc dojo/has!touch?./TouchScroll xstyle/has-class put-selector/put dojo/_base/sniff xstyle/css!./css/dgrid.css".split(" "),function(r,k,e,d,a,t,v,h){function u(b,a){var f=document.body,
c;h(f,b,".dgrid-scrollbar-measure");c=b["offset"+a]-b["client"+a];h(b,"!dgrid-scrollbar-measure");f.removeChild(b);return c}function g(b){var a=b?"."+b.replace(s,"."):"";this._class&&(a="!"+this._class.replace(s,"!")+a);h(this.domNode,a);this._class=b}function n(){return this._class}v("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var c,z;d.add("dom-scrollbar-width",function(b,a,f){return u(f,"Width")});d.add("dom-scrollbar-height",function(b,a,f){return u(f,"Height")});
var f=0,s=/ +/g,m=7>d("ie")?function(){var b,a,f;if(this._started&&(b=document.documentElement,a=b.clientWidth,b=b.clientHeight,f=this._prevWinDims||[],f[0]!==a||f[1]!==b))this.resize(),this._prevWinDims=[a,b]}:function(){this._started&&this.resize()};return k(t?t:null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,postscript:function(b,a){var f=this;(this._Row=function(b,a,f){this.id=b;this.data=a;this.element=f}).prototype.remove=function(){f.removeRow(this.element)};
a&&(this.srcNodeRef=a=a.nodeType?a:document.getElementById(a));this.create(b,a)},listType:"list",create:function(b,a){var c=this.domNode=a||h("div"),d;b?(this.params=b,k.safeMixin(this,b),d=b["class"]||b.className||c.className,this._sort=b.sort||[],delete this.sort):this._sort=[];this.observers=[];this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=c.id=c.id||this.id||"dgrid_"+f++;this.buildRendering();d&&g.call(this,d);this.postCreate&&this.postCreate();
delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var b=this.domNode,f=this,c,g,q,p;p=this.isRTL="rtl"==(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase();b.className="";h(b,"[role\x3dgrid].ui-widget.dgrid.dgrid-"+this.listType);c=this.headerNode=h(b,"div.dgrid-header.dgrid-header-row.ui-widget-header"+(this.showHeader?"":".dgrid-header-hidden"));8>d("ie")&&h(b,"div.dgrid-spacer");g=this.bodyNode=h(b,"div.dgrid-scroller");
g.tabIndex=-1;this.headerScrollNode=h(b,"div.dgrid-header-scroll.dgrid-scrollbar-width.ui-widget-header");q=this.footerNode=h("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));h(b,q);p&&(b.className+=" dgrid-rtl"+(d("webkit")?"":" dgrid-rtl-nonwebkit"));e(g,"scroll",function(a){f.showHeader&&(c.scrollLeft=a.scrollLeft||g.scrollLeft);a.stopPropagation();e.emit(b,"scroll",{scrollTarget:g})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=h(this.bodyNode,"div.dgrid-content.ui-widget-content");
this._listeners.push(this._resizeHandle=e(window,"resize",a.throttleDelayed(m,this)))},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",this._sort))},configStructure:function(){},resize:function(){var b=this.bodyNode,f=this.headerNode,g=this.footerNode,e=f.offsetHeight,q=this.showFooter?g.offsetHeight:0,p=7>d("ie");this.headerScrollNode.style.height=b.style.marginTop=e+"px";b.style.marginBottom=q+"px";p&&(b.style.height="",b.style.height=
Math.max(this.domNode.offsetHeight-e-q,0)+"px",q&&(g.style.bottom="1px",setTimeout(function(){g.style.bottom=""},0)));c||(c=d("dom-scrollbar-width"),z=d("dom-scrollbar-height"),d("ie")&&(c++,z++),a.addCssRule(".dgrid-scrollbar-width","width: "+c+"px"),a.addCssRule(".dgrid-scrollbar-height","height: "+z+"px"),17!=c&&!p&&(a.addCssRule(".dgrid-header","right: "+c+"px"),a.addCssRule(".dgrid-rtl-nonwebkit .dgrid-header","left: "+c+"px")));p&&(f.style.width=b.clientWidth+"px",setTimeout(function(){f.scrollLeft=
b.scrollLeft},0))},addCssRule:function(b,f){var c=a.addCssRule(b,f);this.cleanAddedRules&&this._listeners.push(c);return c},on:function(b,a){var f=e(this.domNode,b,a);d("dom-addeventlistener")||this._listeners.push(f);return f},cleanup:function(){var b=this.observers,a;for(a in this._rowIdToObject)if(this._rowIdToObject[a]!=this.columns){var f=document.getElementById(a);f&&this.removeRow(f,!0)}for(a=0;a<b.length;a++)(f=b[a])&&f.cancel();this.observers=[];this.preload=null},destroy:function(){if(this._listeners){for(var b=
this._listeners.length;b--;)this._listeners[b].remove();delete this._listeners}this.cleanup();h(this.domNode,"!")},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},newRow:function(b,a,f,c,q){if(a){var d=this.insertRow(b,a,f,c,q);h(d,".ui-state-highlight");setTimeout(function(){h(d,"!ui-state-highlight")},250);return d}},adjustRowIndices:function(b){if(this.maintainOddEven){var a=b.rowIndex;if(-1<a){do-1<b.rowIndex&&(-1<
(b.className+" ").indexOf("dgrid-row ")&&h(b,"."+(1==a%2?"dgrid-row-odd":"dgrid-row-even")+"!"+(0==a%2?"dgrid-row-odd":"dgrid-row-even")),b.rowIndex=a++);while((b=b.nextSibling)&&b.rowIndex!=a&&!b.blockRowIndex)}}},renderArray:function(b,a,f){function c(b){k=d.insertRow(b,n,null,g++,f);k.observerIndex=m;return k}function q(b){if(A=a?a.parentNode:d.contentNode)A.insertBefore(n,a||null),(k=b[b.length-1])&&d.adjustRowIndices(k);return e=b}f=f||{};var d=this,g=f.start||0,l,e,A;a||(this._lastCollection=
b);if(b.observe)var m=this.observers.push(b.observe(function(b,c,q){var g,n,h;-1<c&&e[c]&&(l=e.splice(c,1)[0],l.parentNode==A&&((g=l.nextSibling)&&c!=q&&g.rowIndex--,d.removeRow(l)),d._processScroll&&d._processScroll());if(-1<q){n=e[q];if(!n&&(n=e[q-1]))n=(n.connected||n).nextSibling;h=a&&a.parentNode||n&&n.parentNode||d.contentNode;if(l=d.newRow(b,h,n,f.start+q,f))if(l.observerIndex=m,e.splice(q,0,l),!g||q<c)g=l.previousSibling,g=!g||g.rowIndex+1==l.rowIndex||0==l.rowIndex?l:g;f.count++}c!=q&&g&&
d.adjustRowIndices(g);d._onNotification(e,b,c,q)},!0))-1;var n=document.createDocumentFragment();if(b.map){if(e=b.map(c,console.error),e.then)return e.then(q)}else{e=[];for(var h=0,s=b.length;h<s;h++)e[h]=c(b[h])}var k;return q(e)},_onNotification:function(b,a,f,c){},renderHeader:function(){},_autoId:0,insertRow:function(b,a,f,c,q){var d=q.parentId,d=this.id+"-row-"+(d?d+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(b):this._autoId++),g=document.getElementById(d),l=g&&g.previousSibling;
g&&this.removeRow(g);g=this.renderRow(b,q);g.className=(g.className||"")+" ui-state-default dgrid-row "+(1==c%2?"dgrid-row-odd":"dgrid-row-even");this._rowIdToObject[g.id=d]=b;a.insertBefore(g,f||null);l&&this.adjustRowIndices(l);g.rowIndex=c;return g},renderRow:function(b,a){return h("div",""+b)},removeRow:function(b,a){b=b.element||b;delete this._rowIdToObject[b.id];a||h(b,"!")},row:function(b){var a;if(b instanceof this._Row)return b;b.target&&b.target.nodeType&&(b=b.target);if(b.nodeType){do{var f=
b.id;if(a=this._rowIdToObject[f])return new this._Row(f.substring(this.id.length+5),a,b);b=b.parentNode}while(b&&b!=this.domNode)}else return"object"==typeof b?a=this.store.getIdentity(b):(a=b,b=this._rowIdToObject[this.id+"-row-"+a]),new this._Row(a,b,document.getElementById(this.id+"-row-"+a))},cell:function(b){return{row:this.row(b)}},_move:function(b,a,f,c){var d,g;g=d=b.element;a=a||1;do if(b=d[0>a?"previousSibling":"nextSibling"]){do if((d=b)&&-1<(d.className+" ").indexOf(f+" ")){g=d;a+=0>a?
1:-1;break}while(b=(!c||!d.hidden)&&d[0>a?"lastChild":"firstChild"])}else if(d=d.parentNode,d===this.bodyNode||d===this.headerNode)break;while(a);return g},up:function(b,a,f){b.element||(b=this.row(b));return this.row(this._move(b,-(a||1),"dgrid-row",f))},down:function(b,a,f){b.element||(b=this.row(b));return this.row(this._move(b,a||1,"dgrid-row",f))},scrollTo:d("touch")?function(){return this.inherited(arguments)}:function(a){"undefined"!==typeof a.x&&(this.bodyNode.scrollLeft=a.x);"undefined"!==
typeof a.y&&(this.bodyNode.scrollTop=a.y)},getScrollPosition:d("touch")?function(){return this.inherited(arguments)}:function(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}},get:function(a){var f="_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"===typeof this[f]?this[f].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,f){if("object"===typeof a)for(var c in a)this.set(c,a[c]);else c="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[c]?this[c].apply(this,
[].slice.call(arguments,1)):this[a]=f;return this},_getClass:n,_setClass:g,_getClassName:n,_setClassName:g,_setSort:function(a,f){this._sort="string"!=typeof a?a:[{attribute:a,descending:f}];this.refresh();this._lastCollection&&(a.length&&("string"!=typeof a&&(f=a[0].descending,a=a[0].attribute),this._lastCollection.sort(function(c,d){var g=c[a],e=d[a];void 0===g&&(g="");void 0===e&&(e="");return g==e?0:g>e==!f?1:-1})),this.renderArray(this._lastCollection))},sort:function(a,f){r.deprecated("sort(...)",
'use set("sort", ...) instead',"dgrid 1.0");this.set("sort",a,f)},_getSort:function(){return this._sort},_setShowHeader:function(a){var f=this.headerNode;this.showHeader=a;h(f,(a?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();a&&(f.scrollLeft=this.getScrollPosition().x)},setShowHeader:function(a){r.deprecated("setShowHeader(...)",'use set("showHeader", ...) instead',"dgrid 1.0");this.set("showHeader",a)},_setShowFooter:function(a){this.showFooter=a;h(this.footerNode,(a?"!":".")+
"dgrid-footer-hidden");this.resize()}})})},"dgrid/util/misc":function(){define(["put-selector/put"],function(r){var k=[],e,d,a,t=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,v={defaultDelay:15,throttle:function(a,d,g){var e=!1;g=g||v.defaultDelay;return function(){e||(e=!0,a.apply(d,arguments),setTimeout(function(){e=!1},g))}},throttleDelayed:function(a,d,g){var e=!1;g=g||v.defaultDelay;return function(){if(!e){e=!0;var c=arguments;setTimeout(function(){e=!1;a.apply(d,c)},g)}}},debounce:function(a,d,g){var e;
g=g||v.defaultDelay;return function(){e&&(clearTimeout(e),e=null);var c=arguments;e=setTimeout(function(){a.apply(d,c)},g)}},addCssRule:function(h,u){e||(e=r(document.getElementsByTagName("head")[0],"style"),e=e.sheet||e.styleSheet,d=e.deleteRule?"deleteRule":"removeRule",a=e.cssRules?"cssRules":"rules");var g=k.length;k[g]=(e.cssRules||e.rules).length;e.addRule?e.addRule(h,u):e.insertRule(h+"{"+u+"}",k[g]);return{get:function(d){return e[a][k[g]].style[d]},set:function(d,c){"undefined"!==typeof k[g]&&
(e[a][k[g]].style[d]=c)},remove:function(){var a=k[g],c,h;if(void 0!==a){e[d](a);k[g]=void 0;c=g+1;for(h=k.length;c<h;c++)k[c]>a&&k[c]--}}}},escapeCssIdentifier:function(a){return a.replace(t,"\\$1")}};return v})},"xstyle/has-class":function(){define(["dojo/has"],function(r){var k={};return function(){for(var e,d=arguments,a=0;a<d.length;a++)if(e=d[a],!k[e]){k[e]=!0;var t=e.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),v=r(t[2]),h=-t[4];if((0<h?h<=v&&(-t[5]||h)>=v:!!v)==!t[1])document.documentElement.className+=
" has-"+e}}})},"xstyle/css":function(){define(["require"],function(r){function k(e,d,a){var k=document.documentElement;e=k.insertBefore(document.createElement(e),k.firstChild);e.id=d;d=(e.currentStyle||getComputedStyle(e,null))[a];k.removeChild(e);return d}return{load:function(e,d,a,t){function v(){var g=k("x-parse",null,"content");g&&"none"!=g?d([eval(g)],a):a()}var h=d.toUrl(e),u=d.cache["url:"+h];if(u)return u.xCss&&(u=u.cssText),r(["./util/createStyleSheet"],function(a){a(u)}),v();if("none"==
k("div",e.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display"))return v();r(["./load-css"],function(a){a(h,v)})}}})},"dgrid/OnDemandList":function(){define("./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on ./util/misc put-selector/put".split(" "),function(r,k,e,d,a,t,v,h){return e([r,k],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:1,pagingMethod:"debounce",pagingDelay:v.defaultDelay,keepScrollPosition:!1,
rowHeight:22,postCreate:function(){this.inherited(arguments);var a=this;t(this.bodyNode,"scroll",v[this.pagingMethod](function(d){a._processScroll(d)},null,this.pagingDelay))},renderQuery:function(e,g,n){function c(a){h(x,"!");if(a)throw k._refreshDeferred&&(k._refreshDeferred.reject(a),delete k._refreshDeferred),a;}var k=this,f={query:e,count:0,node:g,options:n},s=this.preload,m;if(!g){var b={node:h(this.contentNode,"div.dgrid-preload",{rowIndex:0}),count:0,query:e,next:f,options:n};b.node.style.height=
"0";f.node=g=h(this.contentNode,"div.dgrid-preload");f.previous=b}g.rowIndex=this.minRowsPerPage;s?((f.next=s.next)&&this.bodyNode.scrollTop>=s.node.offsetTop?f.previous=s:(f.next=s,f.previous=s.previous),f.previous.next=f,f.next.previous=f):this.preload=f;var x=h(g,"-div.dgrid-loading");h(x,"div.dgrid-below").innerHTML=this.loadingMessage;n=d.mixin(this.get("queryOptions"),n,{start:0,count:this.minRowsPerPage,query:e});this._trackError(function(){return m=e(n)});if("undefined"===typeof m)c();else return a.when(k.renderArray(m,
g,n),function(b){return a.when(m.total||m.length,function(a){h(x,"!");var c=b.length;0===a&&(k.noDataNode=h(k.contentNode,"div.dgrid-no-data"),k.noDataNode.innerHTML=k.noDataMessage);for(var d=0,e=0;e<c;e++)d+=k._calcRowHeight(b[e]);c&&d&&(k.rowHeight=d/c);a-=c;f.count=a;g.rowIndex=c;a?g.style.height=Math.min(a*k.rowHeight,k.maxEmptySpace)+"px":g.style.display="none";k._previousScrollPosition&&(k.scrollTo(k._previousScrollPosition),delete k._previousScrollPosition);k._processScroll();k._refreshDeferred&&
(k._refreshDeferred.resolve(m),delete k._refreshDeferred);return b},c)},c),m},refresh:function(d){var e=this,h=d&&d.keepScrollPosition,c;"undefined"===typeof h&&(h=this.keepScrollPosition);h&&(this._previousScrollPosition=this.getScrollPosition());this.inherited(arguments);if(this.store)return h=this._refreshDeferred=new a,c=e.renderQuery(function(a){return e.store.query(e.query,a)}),"undefined"===typeof c&&h.reject(),h.then(function(a){setTimeout(function(){t.emit(e.domNode,"dgrid-refresh-complete",
{bubbles:!0,cancelable:!1,grid:e,results:a})},0);delete e._refreshDeferred;return a},function(a){delete e._refreshDeferred;throw a;})},resize:function(){this.inherited(arguments);this._processScroll()},_calcRowHeight:function(a){var d=a.previousSibling;return d&&d.offsetTop!=a.offsetTop?a.offsetHeight:0},lastScrollTop:0,_processScroll:function(e){function g(a,b,f,d){var e=c.farOffRemoval,l=a.node;if(b>2*e){for(var g,q=l[f],A=0,m=0,s=[];g=q;){var p=c._calcRowHeight(g);if(A+p+e>b||0>q.className.indexOf("dgrid-row")&&
0>q.className.indexOf("dgrid-loading"))break;var q=g[f],w,B=g.observerIndex;if(B!=w&&-1<w){var E=c.observers,C=E[w];C&&C.cancel();E[w]=0}A+=p;m+=g.count||1;w=B;c.removeRow(g,!0);s.push(g)}a.count+=m;d?(l.rowIndex-=m,k(a)):l.style.height=l.offsetHeight+A+"px";var Z=h("div",s);setTimeout(function(){h(Z,"!")},1)}}function k(a,b){a.node.style.height=Math.min(a.count*c.rowHeight,b?Infinity:c.maxEmptySpace)+"px"}var c=this,r=c.bodyNode;e=e&&e.scrollTop||this.getScrollPosition().y;var f=r.offsetHeight+e,
s,m,b=c.preload,x=c.lastScrollTop,y=c.bufferRows*c.rowHeight,v=y-c.rowHeight,q,p,C;for(c.lastScrollTop=e;b&&!b.node.offsetWidth;)b=b.previous;for(;b&&b!=s;){s=c.preload;c.preload=b;m=b.node;var l=m.offsetTop;if(f+1+v<l){do b=b.previous;while(b&&!b.node.offsetWidth)}else if(e-1-v>l+m.offsetHeight){do b=b.next;while(b&&!b.node.offsetWidth)}else{var w=((m.rowIndex?e-y:f)-l)/c.rowHeight,l=(f-e+2*y)/c.rowHeight,A=Math.max(Math.min((e-x)*c.rowHeight,c.maxRowsPerPage/2),c.maxRowsPerPage/-2),l=l+Math.min(Math.abs(A),
10);0==m.rowIndex&&(w-=l);w=Math.max(w,0);10>w&&(0<w&&l+w<c.maxRowsPerPage)&&(l+=Math.max(0,w),w=0);l=Math.min(Math.max(l,c.minRowsPerPage),c.maxRowsPerPage,b.count);if(0==l)return;var l=Math.ceil(l),w=Math.min(Math.floor(w),b.count-l),E=d.mixin(c.get("queryOptions"),b.options);b.count-=l;var B=m,t,H=c.queryRowsOverlap;if(A=0<m.rowIndex&&b){var G=b.previous;G&&(g(G,e-(G.node.offsetTop+G.node.offsetHeight),"nextSibling"),0<w&&G.node==m.previousSibling?(w=Math.min(b.count,w),b.previous.count+=w,k(b.previous,
!0),m.rowIndex+=w,H=0):l+=w,b.count-=w);E.start=m.rowIndex-H;m.rowIndex+=l}else b.next&&(g(b.next,b.next.node.offsetTop-f,"previousSibling",!0),B=m.nextSibling,B==b.next.node?(b.next.count+=b.count-w,b.next.node.rowIndex=w+l,k(b.next),b.count=w,H=0):t=!0),E.start=b.count;E.count=Math.min(l+H,c.maxRowsPerPage);t&&(B&&B.offsetWidth)&&(t=B.offsetTop);k(b);m=h(B,"-div.dgrid-loading[style\x3dheight:"+l*c.rowHeight+"px]");h(m,"div.dgrid-"+(A?"below":"above")).innerHTML=c.loadingMessage;m.count=l;m.blockRowIndex=
!0;E.query=b.query;var I=b.query(E);if(void 0===c._trackError(function(){return I})){h(m,"!");return}(function(b,f,d,e,l){C=a.when(c.renderArray(l,b,E),function(f){p=l;B=b.nextSibling;h(b,"!");if(e&&B&&B.offsetWidth){var g=c.getScrollPosition();c.scrollTo({x:g.x,y:g.y+B.offsetTop-e,preserveMomentum:!0})}d&&a.when(l.total||l.length,function(a){d.count=a-d.node.rowIndex;k(d)});c._processScroll();return f},function(a){h(b,"!");throw a;})}).call(this,m,r,A,t,I);b=b.previous}}if(C&&(q=this._refreshDeferred))delete this._refreshDeferred,
a.when(C,function(){q.resolve(p)})}})})},"dgrid/_StoreMixin":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/aspect put-selector/put".split(" "),function(r,k,e,d,a,t,v){function h(a){return a}function u(d){"object"!==typeof d&&(d=Error(d));d.grid=this;a.emit(this.domNode,"dgrid-error",{grid:this,error:d,cancelable:!0,bubbles:!0})&&console.error(d)}return k(null,{store:null,query:null,queryOptions:null,getBeforePut:!0,noDataMessage:"",loadingMessage:"",
constructor:function(){this.query={};this.queryOptions={};this.dirty={};this._updating={};this._columnsWithSet={};t.before(this,"configStructure",e.hitch(this,function(){this._columnsWithSet={}}))},_configColumn:function(a){a.set&&(this._columnsWithSet[a.field]=a)},_setStore:function(a,d,c){this.store=a;this.dirty={};this.set("query",d,c)},_setQuery:function(a,d){var c=d&&d.sort;this.query=void 0!==a?a:this.query;this.queryOptions=d||this.queryOptions;c?this.set("sort",c):this.refresh()},setStore:function(a,
d,c){r.deprecated("setStore(...)",'use set("store", ...) instead',"dgrid 1.0");this.set("store",a,d,c)},setQuery:function(a,d){r.deprecated("setQuery(...)",'use set("query", ...) instead',"dgrid 1.0");this.set("query",a,d)},_getQueryOptions:function(){var a=e.delegate(this.queryOptions,{});this._sort.length&&(a.sort=this._sort);return a},_getQuery:function(){var a=this.query;return"object"==typeof a&&null!=a?e.delegate(a,{}):a},_setSort:function(a,d){this.store&&(this._lastCollection=null);this.inherited(arguments)},
insertRow:function(a,d,c,h,f){var k=this.store,m=this.dirty,k=k&&k.getIdentity(a),b;k in m&&!(k in this._updating)&&(b=m[k]);b&&(a=e.delegate(a,b));return this.inherited(arguments)},updateDirty:function(a,d,c){var e=this.dirty,f=e[a];f||(f=e[a]={});f[d]=c},setDirty:function(a,d,c){r.deprecated("setDirty(...)","use updateDirty() instead","dgrid 1.0");this.updateDirty(a,d,c)},save:function(){function a(b,f){return function(a){var g=e._columnsWithSet,k=e._updating,l,m;for(l in f)a[l]=f[l];for(l in g)m=
g[l].set(a),void 0!==m&&(a[l]=m);k[b]=!0;return d.when(c.put(a),function(){delete h[b];delete k[b]})}}var e=this,c=this.store,h=this.dirty,f=new d,k=f.promise,m=function(a){var b;return e.getBeforePut||!(b=e.row(a).data)?function(){return c.get(a)}:function(){return b}},b;for(b in h)var x=a(b,h[b]),k=k.then(m(b)).then(x);f.resolve();return k},revert:function(){this.dirty={};this.refresh()},_trackError:function(a){var k;"string"==typeof a&&(a=e.hitch(this,a));try{k=a()}catch(c){u.call(this,c)}return d.when(k,
h,e.hitch(this,u))},newRow:function(){this.noDataNode&&(v(this.noDataNode,"!"),delete this.noDataNode);return this.inherited(arguments)},removeRow:function(a,d){var c={element:a};!d&&(this.noDataMessage&&this.up(c).element===a&&this.down(c).element===a)&&(this.noDataNode=v(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage);return this.inherited(arguments)}})})},"dgrid/Keyboard":function(){define("dojo/_base/declare dojo/aspect dojo/on dojo/_base/lang dojo/has put-selector/put dojo/_base/Deferred dojo/_base/sniff".split(" "),
function(r,k,e,d,a,t,v){function h(a){a.preventDefault()}var u={checkbox:1,radio:1,button:1},g=/\bdgrid-cell\b/,n=/\bdgrid-row\b/;a.add("dom-contains",function(a,b,f){return!!f.contains});var c=r(null,{pageSkip:10,tabIndex:0,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);this.keyMap||(this.keyMap=d.mixin({},c.defaultKeyMap));this.headerKeyMap||(this.headerKeyMap=d.mixin({},c.defaultHeaderKeyMap))},postCreate:function(){function b(a){var f=a.target;return f.type&&
(!u[f.type]||32==a.keyCode)}function f(d){function q(){if(c._focusedHeaderNode=s=m?c.headerNode.getElementsByTagName("th")[0]:c.headerNode)s.tabIndex=c.tabIndex}var m=c.cellNavigation,h=m?g:n,p=d===c.headerNode,s=d;p?(q(),k.after(c,"renderHeader",q,!0)):k.after(c,"renderArray",function(b){return v.when(b,function(b){var f=c._focusedNode||s,e;if(e=h.test(f.className))e=f,e=a("dom-contains")?d.contains(e):d.compareDocumentPosition(e)&8;if(e)return b;e=0;for(var l=d.getElementsByTagName("*"),q;q=l[e];++e)if(h.test(q.className)){f=
c._focusedNode=q;break}f.tabIndex=c.tabIndex;return b})});c._listeners.push(e(d,"mousedown",function(a){b(a)||c._focusOnNode(a.target,p,a)}));c._listeners.push(e(d,"keydown",function(a){if(!a.metaKey&&!a.altKey){var f=c[p?"headerKeyMap":"keyMap"][a.keyCode];f&&!b(a)&&f.call(c,a)}}))}this.inherited(arguments);var c=this;this.tabableHeader&&(f(this.headerNode),e(this.headerNode,"dgrid-cellfocusin",function(){c.scrollTo({x:this.scrollLeft})}));f(this.contentNode)},addKeyHandler:function(a,b,f){return k.after(this[f?
"headerKeyMap":"keyMap"],a,b,!0)},_focusOnNode:function(b,f,c){f="_focused"+(f?"Header":"")+"Node";var q=this[f],g=this.cellNavigation?"cell":"row",m=this[g](b),k,h,p,s,n;if(b=m&&m.element){if(this.cellNavigation){k=b.getElementsByTagName("input");n=0;for(p=k.length;n<p;n++)if(h=k[n],(-1!=h.tabIndex||"lastValue"in h)&&!h.disabled){8>a("ie")&&(h.style.position="relative");h.focus();8>a("ie")&&(h.style.position="");s=!0;break}}c=d.mixin({grid:this},c);c.type&&(c.parentType=c.type);c.bubbles||(c.bubbles=
!0);q&&(t(q,"!dgrid-focus[!tabIndex]"),8>a("ie")&&(q.style.position=""),c[g]=this[g](q),e.emit(b,"dgrid-cellfocusout",c));q=this[f]=b;c[g]=m;s||(8>a("ie")&&(b.style.position="relative"),b.tabIndex=this.tabIndex,b.focus());t(b,".dgrid-focus");e.emit(q,"dgrid-cellfocusin",c)}},focusHeader:function(a){this._focusOnNode(a||this._focusedHeaderNode,!0)},focus:function(a){this._focusOnNode(a||this._focusedNode,!1)}}),z=c.moveFocusVertical=function(a,b){var f=this.cellNavigation,c=this[f?"cell":"row"](a),
c=f&&c.column.id,d=this.down(this._focusedNode,b,!0);f&&(d=this.cell(d,c));this._focusOnNode(d,!1,a);a.preventDefault()};r=c.moveFocusUp=function(a){z.call(this,a,-1)};var f=c.moveFocusDown=function(a){z.call(this,a,1)},s=c.moveFocusPageUp=function(a){z.call(this,a,-this.pageSkip)},m=c.moveFocusPageDown=function(a){z.call(this,a,this.pageSkip)},b=c.moveFocusHorizontal=function(a,b){if(this.cellNavigation){var f=!this.row(a);this._focusOnNode(this.right(this["_focused"+(f?"Header":"")+"Node"],b),f,
a);a.preventDefault()}},x=c.moveFocusLeft=function(a){b.call(this,a,-1)},y=c.moveFocusRight=function(a){b.call(this,a,1)},D=c.moveHeaderFocusEnd=function(a,b){var f;this.cellNavigation&&(f=this.headerNode.getElementsByTagName("th"),this._focusOnNode(f[b?0:f.length-1],!0,a));a.preventDefault()},q=c.moveHeaderFocusHome=function(a){D.call(this,a,!0)},p=c.moveFocusEnd=function(b,f){var c=this,e=this.cellNavigation,q=this.contentNode,g=q.scrollTop+(f?0:q.scrollHeight),q=q[f?"firstChild":"lastChild"],h=
-1<q.className.indexOf("dgrid-preload"),m=h?q[(f?"next":"previous")+"Sibling"]:q,p=m.offsetTop+(f?0:m.offsetHeight),s;if(h){for(;m&&0>m.className.indexOf("dgrid-row");)m=m[(f?"next":"previous")+"Sibling"];if(!m)return}!h||1>q.offsetHeight?(e&&(m=this.cell(m,this.cell(b).column.id)),this._focusOnNode(m,!1,b)):(a("dom-addeventlistener")||(b=d.mixin({},b)),s=k.after(this,"renderArray",function(a){s.remove();return v.when(a,function(a){a=a[f?0:a.length-1];e&&(a=c.cell(a,c.cell(b).column.id));c._focusOnNode(a,
!1,b)})}));g===p&&b.preventDefault()},C=c.moveFocusHome=function(a){p.call(this,a,!0)};c.defaultKeyMap={32:h,33:s,34:m,35:p,36:C,37:x,38:r,39:y,40:f};c.defaultHeaderKeyMap={32:h,35:D,36:q,37:x,39:y};return c})},"dgrid/Selection":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/Deferred dojo/on dojo/has dojo/aspect ./List dojo/has!touch?./util/touch put-selector/put dojo/query dojo/_base/sniff".split(" "),function(r,k,e,d,a,t,v,h,u){function g(a,c){for(var d=a.unselectable=c?"on":
"",b=a.getElementsByTagName("*"),e=b.length;--e;)"INPUT"===b[e].tagName||"TEXTAREA"===b[e].tagName||(b[e].unselectable=d)}function n(f,c){var e=f.bodyNode,b=c?"text":21>a("ff")?"-moz-none":"none";z?e.style[z]=b:a("dom-selectstart")?!c&&!f._selectstartHandle?f._selectstartHandle=d(e,"selectstart",function(a){var b=a.target&&a.target.tagName;"INPUT"!==b&&"TEXTAREA"!==b&&a.preventDefault()}):c&&f._selectstartHandle&&(f._selectstartHandle.remove(),delete f._selectstartHandle):(g(e,!c),!c&&!f._unselectableHandle?
f._unselectableHandle=t.after(f,"renderRow",function(a){g(a,!0);return a}):c&&f._unselectableHandle&&(f._unselectableHandle.remove(),delete f._unselectableHandle))}a.add("css-user-select",function(a,c,d){a=d.style;c=["Khtml","O","ms","Moz","Webkit"];d=c.length;var b="userSelect";do if("undefined"!==typeof a[b])return b;while(d--&&(b=c[d]+"UserSelect"));return!1});a.add("dom-selectstart","undefined"!==typeof document.onselectstart);var c=a("mac")?"metaKey":"ctrlKey",z=a("css-user-select");return k(null,
{selectionDelegate:".dgrid-row",selectionEvents:"mousedown,mouseup,dgrid-cellfocusin",deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);var a=this.selectionMode;this.selectionMode="";this._setSelectionMode(a);this._initSelectionEvents()},destroy:function(){this.inherited(arguments);this._selectstartHandle&&this._selectstartHandle.remove();
this._unselectableHandle&&this._unselectableHandle.remove()},_setSelectionMode:function(a){a!=this.selectionMode&&(this.clearSelection(),this.selectionMode=a,this._selectionHandlerName="_"+a+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},setSelectionMode:function(a){r.deprecated("setSelectionMode(...)",'use set("selectionMode", ...) instead',"dgrid 1.0");this.set("selectionMode",a)},_setAllowTextSelection:function(a){"undefined"!==typeof a?n(this,a):n(this,"none"===this.selectionMode);
this.allowTextSelection=a},_handleSelect:function(a,c){if(this[this._selectionHandlerName]&&!("dgrid-cellfocusin"==a.type&&"mousedown"==a.parentType||"mouseup"==a.type&&c!=this._waitForMouseUp)){this._waitForMouseUp=null;this._selectionTriggerEvent=a;if(!a.keyCode||!a.ctrlKey||32==a.keyCode)if(!a.shiftKey&&"mousedown"==a.type&&this.isSelected(c))this._waitForMouseUp=c;else this[this._selectionHandlerName](a,c);this._selectionTriggerEvent=null}},_singleSelectionHandler:function(a,d){var e=a.keyCode?
a.ctrlKey:a[c];this._lastSelected===d?this.select(d,null,!e||!this.isSelected(d)):(this.clearSelection(),this.select(d),this._lastSelected=d)},_multipleSelectionHandler:function(a,d){var e=this._lastSelected,b=a.keyCode?a.ctrlKey:a[c],g;a.shiftKey||(g=b?null:!0,e=null);this.select(d,e,g);e||(this._lastSelected=d)},_extendedSelectionHandler:function(a,d){(2===a.button?!this.isSelected(d):!(a.keyCode?a.ctrlKey:a[c]))&&this.clearSelection(null,!0);this._multipleSelectionHandler(a,d)},_toggleSelectionHandler:function(a,
c){this.select(c,null,null)},_initSelectionEvents:function(){var f=this,e=this.selectionDelegate;a("touch")?d(this.contentNode,h.selector(e,h.tap),function(a){f._handleSelect(a,this)}):d(this.contentNode,d.selector(e,this.selectionEvents),function(a){f._handleSelect(a,this)});this.addKeyHandler&&this.addKeyHandler(32,function(a){f._handleSelect(a,a.target)});if(this.allowSelectAll)this.on("keydown",function(a){a[c]&&65==a.keyCode&&(a.preventDefault(),f[f.allSelected?"clearSelection":"selectAll"]())});
t.before(this,"removeRow",function(a,b){var c;b||(c=this.row(a))&&c.id in this.selection&&this.deselect(a)})},allowSelect:function(a){return!0},_selectionEventQueue:function(a,c){var e=this,b="dgrid-"+(a?"select":"deselect"),g=this[b],h=this._selectionTriggerEvent;h&&(h=h.type);if(g)return g;setTimeout(this._fireSelectionEvent=function(){if(g){var a={bubbles:!0,grid:e};h&&(a.parentType=h);a[c]=g;d.emit(e.contentNode,b,a);g=null;delete e[b]}},0);return g=this[b]=[]},select:function(a,c,d){void 0===
d&&(d=!0);a.element||(a=this.row(a));if(!d||this.allowSelect(a)){var b=this.selection,e=b[a.id];null===d&&(d=!e);var g=a.element;!d&&!this.allSelected?delete this.selection[a.id]:b[a.id]=d;g&&(d?u(g,".dgrid-selected.ui-state-active"):u(g,"!dgrid-selected!ui-state-active"));d!=e&&g&&this._selectionEventQueue(d,"rows").push(a);if(c){c.element||(c=this.row(c));c=c.element;b=a.element;for(b=c&&(c.compareDocumentPosition?2==c.compareDocumentPosition(b):c.sourceIndex>b.sourceIndex)?"down":"up";a.element!=
c&&(a=this[b](a));)this.select(a,null,d)}}},deselect:function(a,c){this.select(a,c,!1)},clearSelection:function(a,c){this.allSelected=!1;for(var d in this.selection)a!==d&&this.deselect(d);c||(this._lastSelected=null)},selectAll:function(){this.allSelected=!0;this.selection={};for(var a in this._rowIdToObject){var c=this.row(this._rowIdToObject[a]);this.select(c.id)}},isSelected:function(a){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.row(a));return a.id in this.selection?!!this.selection[a.id]:
this.allSelected&&(!a.data||this.allowSelect(a))},refresh:function(){this.deselectOnRefresh&&(this.clearSelection(),this._fireSelectionEvent&&this._fireSelectionEvent());this._lastSelected=null;return this.inherited(arguments)},renderArray:function(){var a=this,c=this.inherited(arguments);e.when(c,function(c){var b=a.selection,d,e,g;for(d=0;d<c.length;d++)e=a.row(c[d]),(g=e.id in b?b[e.id]:a.allSelected)&&a.select(e,null,g)});return c}})})},"dgrid/editor":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/on dojo/aspect dojo/has ./Grid put-selector/put dojo/_base/sniff".split(" "),
function(r,k,e,d,a,t,v,h,u){function g(a,b){a.value=b;if("radio"==a.type||"checkbox"==a.type)a.checked=a.defaultChecked=!!b}function n(a,b){if("number"==typeof b)a=isNaN(a)?a:parseFloat(a);else if("boolean"==typeof b)a="true"==a?!0:"false"==a?!1:a;else if(b instanceof Date){var c=new Date(a);a=isNaN(c.getTime())?a:c}return a}function c(b,c,d,e,f){var h,k,m;if((d&&d.valueOf())!=(e&&e.valueOf())&&(h=b.cell(c),k=h.row,m=h.column,m.field&&k))if(h={grid:b,cell:h,rowId:k.id,oldValue:d,value:e,bubbles:!0,
cancelable:!0},f&&f.type&&(h.parentType=f.type),a.emit(c,"dgrid-datachange",h))b.updateDirty&&(b.updateDirty(k.id,m.field,e),m.autoSave&&setTimeout(function(){b._trackError("save")},0));else{var n;(n=c.widget)?(n._dgridIgnoreChange=!0,n.set("value",d),setTimeout(function(){n._dgridIgnoreChange=!1},0)):(n=c.input)&&g(n,d);return d}return e}function z(a,b,d,e){if(!d.isValid||d.isValid()){b=c;var f=(d.domNode||d).parentNode,g=x?y:d._dgridLastValue,h;h="function"==typeof d.get?n(d.get("value")):n(d["checkbox"==
d.type||"radio"==d.type?"checked":"value"]);a=b(a,f,g,h,e);x?y=a:d._dgridLastValue=a}}function f(b){var c=b.editor,d=b.editOn,e=b.grid,f="string"!=typeof c,g,h,m;g=b.editorArgs||{};"function"==typeof g&&(g=g.call(e,b));if(f)h=new c(g),f=h.focusNode||h.domNode,f.className+=" dgrid-input",h.connect(h,d?"onBlur":"onChange",function(){h._dgridIgnoreChange||z(e,b,this,{type:"widget"})});else if(m=function(a){var c=a.target;"_dgridLastValue"in c&&-1<c.className.indexOf("dgrid-input")&&z(e,b,c,a)},b.grid._hasInputListener||
(e._hasInputListener=!0,e.on("change",function(a){m(a)})),h=f=u(("textarea"==c?"textarea":"input[type\x3d"+c+"]")+".dgrid-input",k.mixin({name:b.field,tabIndex:isNaN(b.tabIndex)?-1:b.tabIndex},g)),9>v("ie")||v("ie")&&0)"radio"==c||"checkbox"==c?a(h,"click",function(a){m(a)}):a(h,"change",function(a){m(a)});a(f,"mousedown",function(a){a.stopPropagation()});return h}function s(b,c){var d=f(b),e=b.grid,m=d.domNode||d,n=d.focusNode||m,r=d.domNode?function(){d.set("value",d._dgridLastValue)}:function(){g(d,
d._dgridLastValue);z(b.grid,b,d)};a(n,"keydown",function(a){a=a.keyCode||a.which;27==a?(r(),y=d._dgridLastValue,n.blur()):13==a&&!1!==b.dismissOnEnter&&n.blur()});(b._editorBlurHandle=a.pausable(d,"blur",function(){var c=m.parentNode,f=c.children.length-1,g={alreadyHooked:!0},p=e.cell(m);a.emit(p.element,"dgrid-editor-hide",{grid:e,cell:p,column:b,editor:d,bubbles:!0,cancelable:!1});c.removeChild(m);for(u(p.element,"!dgrid-cell-editing");f--;)u(c.firstChild,"!");h.appendIfNode(c,b.renderCell(b.grid.row(c).data,
y,c,D?k.delegate(g,D):g));x=y=D=null;b._editorBlurHandle.pause()})).pause();return d}function m(b,c,d,e){var f=b.domNode,h=c.grid;f||g(b,e);d.innerHTML="";u(d,".dgrid-cell-editing");u(d,b.domNode||b);f&&(b._started||b.startup(),b._dgridIgnoreChange=!0,b.set("value",e),setTimeout(function(){b._dgridIgnoreChange=!1},0));b._dgridLastValue=e;x&&(y=e,a.emit(d,"dgrid-editor-show",{grid:h,cell:h.cell(d),column:c,editor:b,bubbles:!0,cancelable:!1}))}function b(a){var b,c,e,f,g,h;a.column||(a=this.cell(a));
if(!a||!a.element)return null;b=a.column;f=b.field;c=a.element.contents||a.element;if(g=b.editorInstance){if(x!=c&&(!b.canEdit||b.canEdit(a.row.data,e)))return x=c,a=a.row,e=(e=this.dirty&&this.dirty[a.id])&&f in e?e[f]:b.get?b.get(a.data):a.data[f],m(b.editorInstance,b,c,e),h=new d,setTimeout(function(){g.focus&&g.focus();b._editorBlurHandle&&b._editorBlurHandle.resume();h.resolve(g)},0),h.promise}else if(b.editor&&(g=c.widget||c.input))return h=new d,g.focus&&g.focus(),h.resolve(g),h.promise;return null}
var x,y,D;return function(c,d,g){var k=c.renderCell||h.defaultRenderCell,n=[],A;c||(c={});c.editor=d=d||c.editor||"text";c.editOn=g=g||c.editOn;A="string"!=typeof d;c.widgetArgs&&(r.deprecated("column.widgetArgs","use column.editorArgs instead","dgrid 1.0"),c.editorArgs=c.widgetArgs);t.after(c,"init",g?function(){var a=c.grid;a.edit||(a.edit=b);c.editorInstance=s(c,k)}:function(){var a=c.grid;a.edit||(a.edit=b);A&&n.push(t.before(a,"removeRow",function(b){b=a.cell(b,c.id).element;(b=(b.contents||
b).widget)&&b.destroyRecursive()}))});t.after(c,"destroy",function(){e.forEach(n,function(a){a.remove()});c._editorBlurHandle&&c._editorBlurHandle.remove();g&&A&&c.editorInstance.destroyRecursive()});c.renderCell=g?function(b,d,e,f){if(!f||!f.alreadyHooked)a("TD"==e.tagName?e:e.parentNode,g,function(){D=f;c.grid.edit(this)});return k.call(c,b,d,e,f)}:function(a,b,d,e){if(!c.canEdit||c.canEdit(a,b))a=f(c),m(a,c,d,b),d[A?"widget":"input"]=a;else return k.call(c,a,b,d,e)};return c}})},"moment/moment":function(){define([],
function(){function r(a,b,c,d){var e=c.lang();return e[a].call?e[a](c,d):e[a][b]}function k(a,b){return function(c){return v(a.call(this,c),b)}}function e(a){return function(b){b=a.call(this,b);return b+this.lang().ordinal(b)}}function d(a,b,c){this._d=a;this._isUTC=!!b;this._a=a._a||null;this._lang=c||!1}function a(a){var b=this._data={},c=a.years||a.y||0,d=a.months||a.M||0,e=a.weeks||a.w||0,f=a.days||a.d||0,g=a.hours||a.h||0,h=a.minutes||a.m||0,k=a.seconds||a.s||0;a=a.milliseconds||a.ms||0;this._milliseconds=
a+1E3*k+6E4*h+36E5*g;this._days=f+7*e;this._months=d+12*c;b.milliseconds=a%1E3;k+=t(a/1E3);b.seconds=k%60;h+=t(k/60);b.minutes=h%60;g+=t(h/60);b.hours=g%24;f+=t(g/24);f+=7*e;b.days=f%30;d+=t(f/30);b.months=d%12;c+=t(d/12);b.years=c;this._lang=!1}function t(a){return 0>a?Math.ceil(a):Math.floor(a)}function v(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function h(a,b,c){var d=b._milliseconds,e=b._days;b=b._months;d&&a._d.setTime(+a+d*c);e&&a.date(a.date()+e*c);b&&(d=a.date(),a.date(1).month(a.month()+
b*c).date(Math.min(d,a.daysInMonth())))}function u(a){return"[object Array]"===Object.prototype.toString.call(a)}function g(a,b){var c=Math.min(a.length,b.length),d=Math.abs(a.length-b.length),e=0,f;for(f=0;f<c;f++)~~a[f]!==~~b[f]&&e++;return e+d}function n(a,b,c,d){var e,f=[];for(e=0;7>e;e++)f[e]=a[e]=null==a[e]?2===e?1:0:a[e];a[7]=f[7]=b;null!=a[8]&&(f[8]=a[8]);a[3]+=c||0;a[4]+=d||0;c=new Date(0);b?(c.setUTCFullYear(a[0],a[1],a[2]),c.setUTCHours(a[3],a[4],a[5],a[6])):(c.setFullYear(a[0],a[1],a[2]),
c.setHours(a[3],a[4],a[5],a[6]));c._a=f;return c}function c(a,b){var c,d,e=[];!b&&E&&(b=require("./lang/"+a));for(c=0;c<B.length;c++)b[B[c]]=b[B[c]]||w.en[B[c]];for(c=0;12>c;c++)d=p([2E3,c]),e[c]=RegExp("^"+(b.months[c]||b.months(d,""))+"|^"+(b.monthsShort[c]||b.monthsShort(d,"")).replace(".",""),"i");b.monthsParse=b.monthsParse||e;return w[a]=b}function z(a){return(a="string"===typeof a&&a||a&&a._lang||null)?w[a]||c(a):p}function f(a){var b=a.match(H),c,d;c=0;for(d=b.length;c<d;c++)b[c]=F[b[c]]?
F[b[c]]:b[c].match(/\[.*\]/)?b[c].replace(/^\[|\]$/g,""):b[c].replace(/\\/g,"");return function(e){var f="";for(c=0;c<d;c++)f+="function"===typeof b[c].call?b[c].call(e,a):b[c];return f}}function s(a,b){function c(b){return a.lang().longDateFormat[b]||b}for(var d=5;d--&&G.test(b);)b=b.replace(G,c);M[b]||(M[b]=f(b));return M[b](a)}function m(a){switch(a){case "DDDD":return T;case "YYYY":return U;case "S":case "SS":case "SSS":case "DDD":return S;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":case "a":case "A":return V;
case "Z":case "ZZ":return J;case "T":return W;case "MM":case "DD":case "YY":case "HH":case "hh":case "mm":case "ss":case "M":case "D":case "d":case "H":case "h":case "m":case "s":return R;default:return RegExp(a.replace("\\",""))}}function b(a,b){var c=[0,0,1,0,0,0,0],d={tzh:0,tzm:0},e=b.match(H),f,g;for(f=0;f<e.length;f++)if((g=(m(e[f]).exec(a)||[])[0])&&(a=a.slice(a.indexOf(g)+g.length)),F[e[f]]){var h=c,k=d,l=void 0,p=void 0;switch(e[f]){case "M":case "MM":h[1]=null==g?0:~~g-1;break;case "MMM":case "MMMM":for(l=
0;12>l;l++)if(z().monthsParse[l].test(g)){h[1]=l;p=!0;break}p||(h[8]=!1);break;case "D":case "DD":case "DDD":case "DDDD":null!=g&&(h[2]=~~g);break;case "YY":h[0]=~~g+(70<~~g?1900:2E3);break;case "YYYY":h[0]=~~Math.abs(g);break;case "a":case "A":k.isPm="pm"===(g+"").toLowerCase();break;case "H":case "HH":case "h":case "hh":h[3]=~~g;break;case "m":case "mm":h[4]=~~g;break;case "s":case "ss":h[5]=~~g;break;case "S":case "SS":case "SSS":h[6]=~~(1E3*("0."+g));break;case "Z":case "ZZ":k.isUTC=!0;if((l=
(g+"").match(Y))&&l[1])k.tzh=~~l[1];l&&l[2]&&(k.tzm=~~l[2]);l&&"+"===l[0]&&(k.tzh=-k.tzh,k.tzm=-k.tzm)}null==g&&(h[8]=!1)}d.isPm&&12>c[3]&&(c[3]+=12);!1===d.isPm&&12===c[3]&&(c[3]=0);return n(c,d.isUTC,d.tzh,d.tzm)}function x(a,b,c,d,e){e=e.relativeTime[a];return"function"===typeof e?e(b||1,!!c,a,d):e.replace(/%d/i,b||1)}function y(a,b){p.fn[a]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),this):this._d["get"+c+b]()}}function D(a){p.duration.fn[a]=function(){return this._data[a]}}
function q(a,b){p.duration.fn["as"+a]=function(){return+this/b}}for(var p,C=Math.round,l,w={},A="en",E="undefined"!==typeof module&&module.exports,B="months monthsShort weekdays weekdaysShort weekdaysMin longDateFormat calendar relativeTime ordinal meridiem".split(" "),Q=/^\/?Date\((\-?\d+)/i,H=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,G=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,I=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,
R=/\d\d?/,S=/\d{1,3}/,T=/\d{3}/,U=/\d{1,4}/,V=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,J=/Z|[\+\-]\d\d:?\d\d/i,W=/T/i,X=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,N=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],Y=/([\+\-]|\d\d)/gi,K="Month Date Hours Minutes Seconds Milliseconds".split(" "),L={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},
M={},O=["DDD","w","M","D","d"],P="MDHhmsw".split(""),F={M:function(){return this.month()+1},MMM:function(a){return r("monthsShort",this.month(),this,a)},MMMM:function(a){return r("months",this.month(),this,a)},D:function(){return this.date()},DDD:function(){var a=new Date(this.year(),this.month(),this.date()),b=new Date(this.year(),0,1);return~~((a-b)/864E5+1.5)},d:function(){return this.day()},dd:function(a){return r("weekdaysMin",this.day(),this,a)},ddd:function(a){return r("weekdaysShort",this.day(),
this,a)},dddd:function(a){return r("weekdays",this.day(),this,a)},w:function(){var a=new Date(this.year(),this.month(),this.date()-this.day()+5),b=new Date(a.getFullYear(),0,4);return~~((a-b)/864E5/7+1.5)},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%
12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return v(~~(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+v(~~(a/60),2)+":"+v(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+v(~~(10*a/6),4)}};O.length;)l=O.pop(),F[l+"o"]=e(F[l]);for(;P.length;)l=P.pop(),F[l+l]=k(F[l],2);F.DDDD=k(F.DDD,
3);p=function(a,c){if(null===a||""===a)return null;var e;if(p.isMoment(a))return new d(new Date(+a._d),a._isUTC,a._lang);if(c)if(u(c)){var f=a.match(I)||[],h,k=99,l,m;for(l=0;l<c.length;l++)m=b(a,c[l]),h=s(new d(m),c[l]).match(I)||[],h=g(f,h),h<k&&(k=h,e=m)}else e=b(a,c);else if(e=Q.exec(a),void 0===a)e=new Date;else if(e)e=new Date(+e[1]);else if(a instanceof Date)e=a;else if(u(a))e=n(a);else if("string"===typeof a)if(e="YYYY-MM-DDT",X.exec(a)){for(f=0;4>f;f++)if(N[f][1].exec(a)){e+=N[f][0];break}e=
J.exec(a)?b(a,e+" Z"):b(a,e)}else e=new Date(a);else e=new Date(a);return new d(e)};p.utc=function(a,b){if(u(a))return new d(n(a,!0),!0);"string"===typeof a&&!J.exec(a)&&(a+=" +0000",b&&(b+=" Z"));return p(a,b).utc()};p.unix=function(a){return p(1E3*a)};p.duration=function(b,c){var d=p.isDuration(b),e="number"===typeof b,f=d?b._data:e?{}:b;e&&(c?f[c]=b:f.milliseconds=b);e=new a(f);d&&(e._lang=b._lang);return e};p.humanizeDuration=function(a,b,c){return p.duration(a,!0===b?null:b).humanize(!0===b?
!0:c)};p.version="1.7.2";p.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";p.lang=function(a,b){var d;if(!a)return A;(b||!w[a])&&c(a,b);if(w[a]){for(d=0;d<B.length;d++)p[B[d]]=w[a][B[d]];p.monthsParse=w[a].monthsParse;A=a}};p.langData=z;p.isMoment=function(a){return a instanceof d};p.isDuration=function(b){return b instanceof a};p.lang("en",{months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},
relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}});p.fn=d.prototype={clone:function(){return p(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1E3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},
toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds(),this.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?null!=this._a[8]?!!this._a[8]:!g(this._a,(this._a[7]?p.utc(this._a):p(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){this._isUTC=!0;return this},local:function(){this._isUTC=!1;return this},format:function(a){return s(this,a?a:p.defaultFormat)},add:function(a,b){var c=b?p.duration(+b,a):p.duration(a);h(this,
c,1);return this},subtract:function(a,b){var c=b?p.duration(+b,a):p.duration(a);h(this,c,-1);return this},diff:function(a,b,c){a=this._isUTC?p(a).utc():p(a).local();var d=6E4*(this.zone()-a.zone()),d=this._d-a._d-d,e=this.year()-a.year(),f=this.month()-a.month();a=this.date()-a.date();b="months"===b?12*e+f+a/30:"years"===b?e+(f+a/30)/12:"seconds"===b?d/1E3:"minutes"===b?d/6E4:"hours"===b?d/36E5:"days"===b?d/864E5:"weeks"===b?d/6048E5:d;return c?b:C(b)},from:function(a,b){return p.duration(this.diff(a)).lang(this._lang).humanize(!b)},
fromNow:function(a){return this.from(p(),a)},calendar:function(){var a=this.diff(p().sod(),"days",!0),b=this.lang().calendar,c=b.sameElse,a=-6>a?c:-1>a?b.lastWeek:0>a?b.lastDay:1>a?b.sameDay:2>a?b.nextDay:7>a?b.nextWeek:c;return this.format("function"===typeof a?a.apply(this):a)},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<p([this.year()]).zone()||this.zone()<p([this.year(),5]).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():
this._d.getDay();return null==a?b:this.add({d:a-b})},startOf:function(a){switch(a.replace(/s$/,"")){case "year":this.month(0);case "month":this.date(1);case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}return this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?
0:this._d.getTimezoneOffset()},daysInMonth:function(){return p.utc([this.year(),this.month()+1,0]).date()},lang:function(a){if(void 0===a)return z(this);this._lang=a;return this}};for(l=0;l<K.length;l++)y(K[l].toLowerCase(),K[l]);y("year","FullYear");p.duration.fn=a.prototype={weeks:function(){return t(this.days()/7)},valueOf:function(){return this._milliseconds+864E5*this._days+2592E6*this._months},humanize:function(a){var b=+this,c=this.lang().relativeTime,d;d=!a;var e=this.lang(),f=C(Math.abs(b)/
1E3),g=C(f/60),h=C(g/60),k=C(h/24),l=C(k/365),f=45>f&&["s",f]||1===g&&["m"]||45>g&&["mm",g]||1===h&&["h"]||22>h&&["hh",h]||1===k&&["d"]||25>=k&&["dd",k]||45>=k&&["M"]||345>k&&["MM",C(k/30)]||1===l&&["y"]||["yy",l];f[2]=d;f[3]=0<b;f[4]=e;d=x.apply({},f);b=0>=b?c.past:c.future;a&&(d="function"===typeof b?b(d):b.replace(/%s/i,d));return d},lang:p.fn.lang};for(l in L)L.hasOwnProperty(l)&&(q(l,L[l]),D(l.toLowerCase()));q("Weeks",6048E5);return p})},"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\n\t\t\t\tid\x3d"${id}_label"\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\n\t\t\t\x3e\x3c/span\n\t\t\x3e\x3c/span\n\t\x3e\x3c/span\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\n\t\ttabIndex\x3d"-1" role\x3d"presentation" data-dojo-attach-point\x3d"valueNode"\n/\x3e\x3c/span\x3e\n'}});
define("dote-client/viewAdmin","dojo/_base/array dojo/_base/declare dojo/ready dojo/store/Cache dojo/store/Memory dojo/store/Observable dojo/when dijit/form/Button dgrid/OnDemandGrid dgrid/Keyboard dgrid/Selection dgrid/editor moment/moment ./store/JsonRest ./userControls ./widgetModules".split(" "),function(r,k,e,d,a,t,v,h,u,g,n,c,z,f,s){var m=t(d(new f({target:"/signups/"}),new a)),b=t(d(new f({target:"/users/"}),new a)),x=t(d(new f({target:"/topics/"}),new a));e(function(){s.start();var a=[],d=
(new k([u,g,n]))({columns:[{field:"login",label:"User ID"},{field:"email",label:"E-Mail"},{field:"message",label:"Message"}],store:m,selectionMode:"single"},"signupGrid");d.on("dgrid-select",function(a){l.get("disabled")&&(l.set("disabled",!1),w.set("disabled",!1))});d.on("dgrid-deselect",function(a){for(var b in a.grid.selection)return;l.set("disabled",!0);w.set("disabled",!0)});var e=[{field:"id",label:"User ID"},c({field:"admin",label:"Admin Flag",editor:"checkbox",editOn:"dblclick",autoSave:!0}),
c({field:"owner",label:"Owner Flag",editor:"checkbox",editOn:"dblclick",autoSave:!0}),c({field:"committer",label:"Committer Flag",editor:"checkbox",editOn:"dblclick",autoSave:!0}),c({field:"attempts",label:"Attempts",editor:"text",editOn:"dblclick",autoSave:!0}),{field:"lastLogin",label:"Last Login",get:function(a){return a.lastLogin?z.unix(a.lastLogin).format("DD/MM/YY HH:mm"):null}}];(new k([u,g,n]))({columns:e,store:b},"userGrid");var e=[{field:"id",label:"ID",formatter:function(a){return'\x3ca href\x3d"/topic/'+
a+'" target\x3d"_blank"\x3e'+a+"\x3c/a\x3e"}},c({field:"title",label:"Title",editor:"text",editOn:"dblclick",autoSave:!0}),{field:"voters",sortable:!1,label:"Vote",get:function(a){var b=a.voters.length?0:null;r.forEach(a.voters,function(a){b+=a.vote});return 0<b&&null!==b?"+"+b:b}},{field:"author",label:"Author"},{field:"created",label:"Created",get:function(a){return z.unix(a.created).format("DD/MM/YY HH:mm")}},c({field:"owner",label:"Owner",editor:"text",editOn:"dblclick",autoSave:!0}),c({field:"action",
label:"Action",editor:"text",editOn:"dblclick",autoSave:!0}),{field:"actioned",label:"Actioned",get:function(a){return a.actioned?z.unix(a.actioned).format("DD/MM/YY HH:mm"):null}},{field:"commentsCount",label:"Cmt"}],f=(new k([u,g,n]))({columns:e,store:x,selectionMode:"single"},"topicGrid");f.on("dgrid-select",function(a){t.get("disabled")&&t.set("disabled",!1)});f.on("dgrid-deselect",function(a){for(var b in a.grid.selection)return;t.set("disabled",!0)});var t=new h({id:"deleteTopic",label:"Delete Topic",
disabled:!0},"deleteTopic");t.on("click",function(){for(var a in f.selection)x.remove(a)});a.push(t);var l=new h({id:"activateSignup",label:"Activate",disabled:!0},"activateSignup");l.on("click",function(){function a(c){c&&v(b.put({id:c.login,email:c.email,password:c.password,admin:!1,committer:!1,owner:!1})).then(function(){m.remove(c.id)})}for(var c in d.selection)v(m.get(c)).then(a)});a.push(l);var w=new h({id:"rejectSignup",label:"Reject",disabled:!0},"rejectSignup");w.on("click",function(){for(var a in d.selection)m.remove(a)});
a.push(w);r.forEach(a,function(a){a.startup()})})});
//@ sourceMappingURL=viewAdmin.js.map