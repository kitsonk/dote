//>>built
require({cache:{"dojo/store/Cache":function(){define("dojo/store/Cache",["../_base/lang","../_base/Deferred"],function(s,p){var q=function(f,c,i){i=i||{};return s.delegate(f,{query:function(t,k){var o=f.query(t,k);o.forEach(function(d){(!i.isLoaded||i.isLoaded(d))&&c.put(d)});return o},queryEngine:f.queryEngine||c.queryEngine,get:function(i,k){return p.when(c.get(i),function(o){return o||p.when(f.get(i,k),function(d){d&&c.put(d,{id:i});return d})})},add:function(i,k){return p.when(f.add(i,k),function(o){c.add("object"==
typeof o?o:i,k);return o})},put:function(i,k){c.remove(k&&k.id||this.getIdentity(i));return p.when(f.put(i,k),function(o){c.put("object"==typeof o?o:i,k);return o})},remove:function(i,k){return p.when(f.remove(i,k),function(){return c.remove(i,k)})},evict:function(f){return c.remove(f)}})};s.setObject("dojo.store.Cache",q);return q})},"dojo/store/Memory":function(){define("dojo/store/Memory",["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(s,p,q){return s("dojo.store.Memory",
null,{constructor:function(f){for(var c in f)this[c]=f[c];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:q,get:function(f){return this.data[this.index[f]]},getIdentity:function(f){return f[this.idProperty]},put:function(f,c){var i=this.data,p=this.index,k=this.idProperty,k=f[k]=c&&"id"in c?c.id:k in f?f[k]:Math.random();if(k in p){if(c&&!1===c.overwrite)throw Error("Object already exists");i[p[k]]=f}else p[k]=i.push(f)-1;return k},add:function(f,c){(c=c||{}).overwrite=
!1;return this.put(f,c)},remove:function(f){var c=this.index,i=this.data;if(f in c)return i.splice(c[f],1),this.setData(i),!0},query:function(f,c){return p(this.queryEngine(f,c)(this.data))},setData:function(f){var a;f.items?(this.idProperty=f.identifier,a=this.data=f.items,f=a):this.data=f;this.index={};for(var c=0,i=f.length;c<i;c++)this.index[f[c][this.idProperty]]=c}})})},"dojo/store/util/SimpleQueryEngine":function(){define("dojo/store/util/SimpleQueryEngine",["../../_base/array"],function(s){return function(p,
q){function f(c){var c=s.filter(c,p),f=q&&q.sort;f&&c.sort("function"==typeof f?f:function(k,d){for(var b,a=0;b=f[a];a++){var l=k[b.attribute],g=d[b.attribute];if(l!=g)return!!b.descending==(null==l||l>g)?-1:1}return 0});if(q&&(q.start||q.count)){var k=c.length,c=c.slice(q.start||0,(q.start||0)+(q.count||Infinity));c.total=k}return c}switch(typeof p){default:throw Error("Can not query with a "+typeof p);case "object":case "undefined":var c=p,p=function(f){for(var p in c){var k=c[p];if(k&&k.test){if(!k.test(f[p],
f))return!1}else if(k!=f[p])return!1}return!0};break;case "string":if(!this[p])throw Error("No filter function "+p+" was found in store");p=this[p];case "function":}f.matches=p;return f}})},"dgrid/OnDemandGrid":function(){define("dgrid/OnDemandGrid",["dojo/_base/declare","./Grid","./OnDemandList"],function(s,p,q){return s([p,q],{})})},"dgrid/Grid":function(){define("dgrid/Grid","dojo/_base/kernel,dojo/_base/declare,dojo/on,dojo/has,put-selector/put,./List,dojo/_base/sniff".split(","),function(s,p,
q,f,c,i){function t(d,b){b&&b.nodeType&&d.appendChild(b)}var k=8>f("ie")&&!0,o=/[^\._a-zA-Z0-9-]/g,p=p(i,{columns:null,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(d){return"string"==typeof d?this.columns[d]:this.cell(d).column},listType:"grid",cell:function(d,b){if(d.row&&d.row instanceof this._Row)return d;if(d.target&&d.target.nodeType)d=d.target;var a;if(d.nodeType){do{if(this._rowIdToObject[d.id])break;var l=d.columnId;if(l){b=l;a=d;break}d=d.parentNode}while(d&&d!=this.domNode)
}if(!a&&"undefined"!=typeof b){var g=this.row(d);if(l=g.element)for(var l=l.getElementsByTagName("td"),e=0;e<l.length;e++)if(l[e].columnId==b){a=l[e];break}}if(null!=d)return{row:g||this.row(d),column:b&&this.column(b),element:a}},_columnsCss:function(d){d.fullSelector=function(){return this.parent.fullSelector()+" .dgrid-cell"};for(var b=0;b<d.children.length;b++){var a=d.children[b];a.field=a.className=a.selector.substring(1)}return d.children},createRowCells:function(d,b,a){var l=c("table.dgrid-row-table[role=presentation]"),
g=9>f("ie")?c(l,"tbody"):l,e,r,n,m,v,w,j,h,x,u,a=a||this.subRows;for(r=0,n=a.length;r<n;r++){w=a[r];e=1==n&&!f("ie")?g:c(g,"tr");w.className&&c(e,"."+w.className);for(m=0,v=w.length;m<v;m++){j=w[m];h=j.id;x=j.className||j.field&&"field-"+j.field;x=c(d+(".dgrid-cell.dgrid-cell-padding"+(h?".dgrid-column-"+h:"")+(x?"."+x:"")).replace(o,"-")+"[role="+("th"===d?"columnheader":"gridcell")+"]");x.columnId=h;k?(h=c(x,"!dgrid-cell-padding div.dgrid-cell-padding"),x.contents=h):h=x;if(u=j.colSpan)x.colSpan=
u;if(u=j.rowSpan)x.rowSpan=u;b(h,j);e.appendChild(x)}}return l},left:function(d,b){return this.cell(this._move(d,-(b||1),"dgrid-cell"))},right:function(d,b){return this.cell(this._move(d,b||1,"dgrid-cell"))},renderRow:function(d,b){var a=this.createRowCells("td",function(a,g){var e=d;g.get?e=g.get(d):"field"in g&&"_item"!=g.field&&(e=e[g.field]);g.formatter?a.innerHTML=g.formatter(e):g.renderCell?t(a,g.renderCell(d,e,a,b)):null!=e&&a.appendChild(document.createTextNode(e))},b&&b.subRows);return c("div[role=row]>",
a)},renderHeader:function(){var d=this,b=this.headerNode,a=b.childNodes.length;for(b.setAttribute("role","row");a--;)c(b.childNodes[a],"!");a=this.createRowCells("th",function(b,a){var d=a.headerNode=b;if(k)b=b.parentNode;var c=a.field;if(c)b.field=c;if(a.renderHeaderCell)t(d,a.renderHeaderCell(d));else if(a.label||a.field)d.appendChild(document.createTextNode(a.label||a.field));if(!1!==a.sortable&&c&&"_item"!=c)b.sortable=!0,b.className+=" dgrid-sortable"},this.subRows&&this.subRows.headerRows);
this._rowIdToObject[a.id=this.id+"-header"]=this.columns;b.appendChild(a);q(a,"click,keydown",function(a){if("click"==a.type||32==a.keyCode||13==a.keyCode){var a=a.target,g,e;do if(a.sortable)return d._sortNode=a,a=a.field||a.columnId,g=(e=d._sort[0])&&e.attribute==a&&!e.descending,d.set("sort",a,g);while((a=a.parentNode)&&a!=b)}})},resize:function(){var d=this.headerNode.firstChild,b=this.contentNode,a;this.inherited(arguments);if(!f("ie")||7<f("ie"))if(b.style.width="",b&&d&&(a=d.offsetWidth)!=
b.offsetWidth)b.style.width=a+"px"},destroy:function(){this._destroyColumns();this.inherited(arguments)},_setSort:function(d,b){this.inherited(arguments);this._lastSortedArrow&&(c(this._lastSortedArrow,"<!dgrid-sort-up!dgrid-sort-down"),c(this._lastSortedArrow,"!"),delete this._lastSortedArrow);if(this._sort[0]){var a=this._sort[0].attribute,k=this._sort[0].descending,g=this._sortNode,e,f,o;delete this._sortNode;if(!g)for(o in e=this.columns,e)if(f=e[o],f.field==a){g=f.headerNode;break}if(g)g=g.contents||
g,this._lastSortedArrow=c(g.firstChild,"-div.dgrid-sort-arrow.ui-icon[role=presentation]"),this._lastSortedArrow.innerHTML="&nbsp;",c(g,k?".dgrid-sort-down":".dgrid-sort-up"),this.resize()}},styleColumn:function(d,b){return this.addCssRule("#"+this.domNode.id+" .dgrid-column-"+d,b)},_configColumns:function(d,b){var a=[],k=b instanceof Array,g,e;for(g in b){e=b[g];"string"==typeof e&&(b[g]=e={label:e});if(!k&&!e.field)e.field=g;g=e.id=e.id||(isNaN(g)?g:d+g);d&&(this.columns[g]=e);this._configColumn&&
this._configColumn(e,g,b,d);e.grid=this;"function"===typeof e.init&&e.init();a.push(e)}return k?b:a},_destroyColumns:function(){var d=this.subRows.length,b,a,k,g;this.cleanup();for(b=0;b<d;b++)for(a=0,g=this.subRows[b].length;a<g;a++)k=this.subRows[b][a],"function"===typeof k.destroy&&k.destroy()},configStructure:function(){var d=this.subRows;if(d){this.columns={};for(var b=0;b<d.length;b++)d[b]=this._configColumns(b+"-",d[b])}else this.subRows=[this._configColumns("",this.columns)]},_setColumns:function(d){this._destroyColumns();
this.subRows=null;this.columns=d;this._updateColumns()},_setSubRows:function(d){this._destroyColumns();this.subRows=d;this._updateColumns()},setColumns:function(d){s.deprecated("setColumns(...)",'use set("columns", ...) instead',"dgrid 1.0");this.set("columns",d)},setSubRows:function(d){s.deprecated("setSubRows(...)",'use set("subRows", ...) instead',"dgrid 1.0");this.set("subRows",d)},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);
this.resize()}});p.appendIfNode=t;p.defaultRenderCell=function(d,b,a){null!=b&&a.appendChild(document.createTextNode(b))};return p})},"put-selector/put":function(){(function(s){var p,q=/[-+,> ]/;s("put-selector/put",[],p=function(f,c){function i(c){function d(){e&&g&&e!=g&&(g==c&&(b||(b=q.test(v)&&f.createDocumentFragment()))||g).insertBefore(e,l||null)}for(var b,a,l,g,e,r=arguments,n=r[0],m=0;m<r.length;m++){var v=r[m];if("object"==typeof v){a=!1;if(v instanceof Array){e=f.createDocumentFragment();
for(var w=0;w<v.length;w++)e.appendChild(i(v[w]));v=e}if(v.nodeType)e=v,d(),g=v,l=0;else for(w in v)e[w]=v[w]}else if(a)a=!1,e.appendChild(f.createTextNode(v));else{1>m&&(c=null);a=!0;if(n=v.replace(s,function(j,h,a,b,w,n){if(h){d();if("-"==h||"+"==h){if(g=(l=e||g).parentNode,e=null,"+"==h)l=l.nextSibling}else"<"==h?g=e=(e||g).parentNode:(","==h?g=c:e&&(g=e),e=null),l=0;e&&(g=e)}if((j=!a&&b)||!e&&(a||w))"$"==j?(j=r[++m],g.appendChild(f.createTextNode(j))):(j=j||i.defaultTag,(h=k&&r[m+1]&&r[m+1].name)&&
(j="<"+j+' name="'+h+'">'),e=f.createElement(j));if(a)if("$"==b&&(b=r[++m]),"#"==a)e.id=b;else if(h=(j=e.className)&&(" "+j+" ").replace(" "+b+" "," "),"."==a)e.className=j?(h+b).substring(1):b;else if("!"==v)i("div",e,"<").innerHTML="";else if(h=h.substring(1,h.length-1),h!=j)e.className=h;if(w)if("$"==n&&(n=r[++m]),"style"==w)e.style.cssText=n;else e["!"==w.charAt(0)?(w=w.substring(1))&&"removeAttribute":"setAttribute"](w,""===n?w:n);return""}))throw new SyntaxError("Unexpected char "+n+" in "+
v);d();g=n=e||g}}c&&b&&c.appendChild(b);return n}q=c||q;var s=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,f=f||document,k="object"==typeof f.createElement;i.defaultTag="div";i.forDocument=p;return i})})("undefined"==typeof define?function(s,p){"undefined"==typeof window?require("./node-html")(module,p):put=p()}:define)},"dgrid/List":function(){define("dgrid/List","dojo/_base/array,dojo/_base/kernel,dojo/_base/declare,dojo/on,dojo/has,./util/misc,dojo/has!touch?./TouchScroll,xstyle/has-class,put-selector/put,dojo/_base/sniff,xstyle/css!./css/dgrid.css".split(","),
function(s,p,q,f,c,i,t,k,o){function d(m){var a=m?"."+m.replace(r,"."):"";this._class&&(a="!"+this._class.replace(r,"!")+a);o(this.domNode,a);this._class=m}function b(){return this._class}k("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var a,l=o(document.getElementsByTagName("head")[0],"style"),g=[],l=l.sheet||l.styleSheet,e=0,r=/ +/g,n=7>c("ie")?function(){var m,a,b;if(this._started&&(m=document.documentElement,a=m.clientWidth,m=m.clientHeight,b=this._prevWinDims||
[],b[0]!==a||b[1]!==m))this.resize(),this._prevWinDims=[a,m]}:function(){this._started&&this.resize()};return q(t?t:null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,postscript:function(m,a){var b=this;(this._Row=function(j,m,a){this.id=j;this.data=m;this.element=a}).prototype.remove=function(){b.removeRow(this.element)};if(a)this.srcNodeRef=a=a.nodeType?a:document.getElementById(a);this.create(m,a)},listType:"list",create:function(m,a){var b=this.domNode=a||o("div"),j;m?(this.params=
m,q.safeMixin(this,m),j=m["class"]||m.className||b.className,this._sort=m.sort||[],delete this.sort):this._sort=[];this.observers=[];this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=b.id=b.id||this.id||"dgrid_"+e++;this.buildRendering();j&&d.call(this,j);this.postCreate&&this.postCreate();delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var a=this.domNode,b=this,d,j,h,g;g=this.isRTL="rtl"==(document.body.dir||
document.documentElement.dir||document.body.style.direction).toLowerCase();a.className="";o(a,"[role=grid].ui-widget.dgrid.dgrid-"+this.listType);d=this.headerNode=o(a,"div.dgrid-header.dgrid-header-row.ui-widget-header"+(this.showHeader?"":".dgrid-header-hidden"));8>c("ie")&&o(a,"div.dgrid-spacer");j=this.bodyNode=o(a,"div.dgrid-scroller");j.tabIndex=-1;this.headerScrollNode=o(a,"div.dgrid-header-scroll.dgrid-scrollbar-width.ui-widget-header");h=this.footerNode=o("div.dgrid-footer"+(this.showFooter?
"":".dgrid-footer-hidden"));o(a,h);g&&(a.className+=" dgrid-rtl"+(c("webkit")?"":" dgrid-rtl-nonwebkit"));f(j,"scroll",function(h){if(b.showHeader)d.scrollLeft=h.scrollLeft||j.scrollLeft;h.stopPropagation();f.emit(a,"scroll",{scrollTarget:j})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=o(this.bodyNode,"div.dgrid-content.ui-widget-content");this._listeners.push(this._resizeHandle=f(window,"resize",i.throttleDelayed(n,this)))},startup:function(){this.inherited(arguments);
if(!this._started)this._started=!0,this.resize(),this.set("sort",this._sort)},configStructure:function(){},resize:function(){var m=this.bodyNode,b=this.headerNode,d=this.footerNode,j=b.offsetHeight,h=this.showFooter?d.offsetHeight:0,g=7>c("ie");this.headerScrollNode.style.height=m.style.marginTop=j+"px";m.style.marginBottom=h+"px";if(g&&(m.style.height="",m.style.height=Math.max(this.domNode.offsetHeight-j-h,0)+"px",h))d.style.bottom="1px",setTimeout(function(){d.style.bottom=""},0);a||(j=o(document.body,
"div.dgrid-scrollbar-measure"),a=j.offsetWidth-j.clientWidth,o(j,"!"),7===c("ie")&&a++,this.addCssRule(".dgrid-scrollbar-width","width: "+a+"px"),this.addCssRule(".dgrid-scrollbar-height","height: "+a+"px"),17!=a&&!g&&(this.addCssRule(".dgrid-header","right: "+a+"px"),this.addCssRule(".dgrid-rtl-nonwebkit .dgrid-header","left: "+a+"px")));if(g)b.style.width=m.clientWidth+"px",setTimeout(function(){b.scrollLeft=m.scrollLeft},0)},addCssRule:function(a,b){var d=g.length;g[d]=(l.cssRules||l.rules).length;
l.addRule?l.addRule(a,b):l.insertRule(a+"{"+b+"}",g[d]);return{remove:function(){var j=g[d],a,b=g.length;if(void 0!==j){l.deleteRule?l.deleteRule(j):l.removeRule(j);g[d]=void 0;for(a=d;a<b;a++)g[a]>j&&g[a]--}}}},on:function(a,b){var d=f(this.domNode,a,b);c("dom-addeventlistener")||this._listeners.push(d);return d},cleanup:function(){var a=this.observers,b;for(b in this._rowIdToObject)if(this._rowIdToObject[b]!=this.columns){var d=document.getElementById(b);d&&this.removeRow(d,!0)}for(b=0;b<a.length;b++)(d=
a[b])&&d.cancel();this.observers=[];this.preload=null},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();delete this._listeners}this.cleanup();o(this.domNode,"!")},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},newRow:function(a,b,d,j){if(!b||b.parentNode){var h=this.insertRow(a,b?b.parentNode:this.contentNode,b,j.start+d,j);o(h,".ui-state-highlight");setTimeout(function(){o(h,
"!ui-state-highlight")},250);return h}},adjustRowIndices:function(a){if(this.maintainOddEven){var b=a.rowIndex;if(-1<b){do if(-1<a.rowIndex)-1<(a.className+" ").indexOf("dgrid-row ")&&o(a,"."+(1==b%2?"dgrid-row-odd":"dgrid-row-even")+"!"+(0==b%2?"dgrid-row-odd":"dgrid-row-even")),a.rowIndex=b++;while((a=a.nextSibling)&&a.rowIndex!=b)}}},renderArray:function(a,b,d){function j(a){i=g.insertRow(a,l,null,k++,d);i.observerIndex=o;return i}function h(a){if(f=b?b.parentNode:g.contentNode)f.insertBefore(l,
b||null),(i=a[a.length-1])&&g.adjustRowIndices(i);return c=a}var d=d||{},g=this,k=d.start||0,e,c,f;if(!b)this._lastCollection=a;if(a.observe)var o=this.observers.push(a.observe(function(a,b,j){var h,m;if(-1<b&&c[b]){e=c.splice(b,1)[0];if(e.parentNode==f)(h=e.nextSibling)&&b!=j&&h.rowIndex--,g.removeRow(e);g._processScroll&&g._processScroll()}if(-1<j){m=c[j];if(!m&&(m=c[j-1]))m=(m.connected||m).nextSibling;if(e=g.newRow(a,m,j,d))if(e.observerIndex=o,c.splice(j,0,e),!h||j<b)a=e.previousSibling,h=!a||
a.rowIndex+1==e.rowIndex||0==e.rowIndex?e:a;d.count++}b!=j&&h&&g.adjustRowIndices(h)},!0))-1;var l=document.createDocumentFragment();if(a.map){if(c=a.map(j,console.error),c.then)return c.then(h)}else{c=[];for(var n=0,r=a.length;n<r;n++)c[n]=j(a[n])}var i;return h(c)},renderHeader:function(){},_autoId:0,insertRow:function(a,b,d,j,h){var g=h.parentId,g=this.id+"-row-"+(g?g+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(a):this._autoId++),e=document.getElementById(g),c=e&&e.previousSibling;
if(!e||d&&e.parentNode!=d.parentNode)e&&this.removeRow(e),e=this.renderRow(a,h),e.className=(e.className||"")+" ui-state-default dgrid-row "+(1==j%2?"dgrid-row-odd":"dgrid-row-even"),this._rowIdToObject[e.id=g]=a;b.insertBefore(e,d||null);c&&this.adjustRowIndices(c);e.rowIndex=j;return e},renderRow:function(a){return o("div",""+a)},removeRow:function(a,b){a=a.element||a;delete this._rowIdToObject[a.id];b||o(a,"!")},row:function(a){var b;if(a instanceof this._Row)return a;if(a.target&&a.target.nodeType)a=
a.target;if(a.nodeType){do{var d=a.id;if(b=this._rowIdToObject[d])return new this._Row(d.substring(this.id.length+5),b,a);a=a.parentNode}while(a&&a!=this.domNode)}else return"object"==typeof a?b=this.store.getIdentity(a):(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,document.getElementById(this.id+"-row-"+b))},cell:function(a){return{row:this.row(a)}},_move:function(a,b,d,j){var h,g;g=h=a.element;b=b||1;do if(a=h[0>b?"previousSibling":"nextSibling"]){do if((h=a)&&-1<(h.className+
" ").indexOf(d+" ")){g=h;b+=0>b?1:-1;break}while(a=(!j||!h.hidden)&&h[0>b?"lastChild":"firstChild"])}else if(h=h.parentNode,h===this.bodyNode||h===this.headerNode)break;while(b);return g},up:function(a,b,d){return this.row(this._move(a,-(b||1),"dgrid-row",d))},down:function(a,b,d){return this.row(this._move(a,b||1,"dgrid-row",d))},scrollTo:c("touch")?function(){return this.inherited(arguments)}:function(a){if("undefined"!==typeof a.x)this.bodyNode.scrollLeft=a.x;if("undefined"!==typeof a.y)this.bodyNode.scrollTop=
a.y},getScrollPosition:c("touch")?function(){return this.inherited(arguments)}:function(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}},get:function(a){var b="_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"===typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"===typeof a)for(var d in a)this.set(d,a[d]);else d="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[d]?this[d].apply(this,[].slice.call(arguments,
1)):this[a]=b;return this},_getClass:b,_setClass:d,_getClassName:b,_setClassName:d,_setSort:function(a,b){this._sort="string"!=typeof a?a:[{attribute:a,descending:b}];this.refresh();if(this._lastCollection){if(a.length){if("string"!=typeof a)b=a[0].descending,a=a[0].attribute;this._lastCollection.sort(function(d,j){var h=d[a],g=j[a];void 0===h&&(h="");void 0===g&&(g="");return h==g?0:h>g==!b?1:-1})}this.renderArray(this._lastCollection)}},sort:function(a,b){p.deprecated("sort(...)",'use set("sort", ...) instead',
"dgrid 1.0");this.set("sort",a,b)},_getSort:function(){return this._sort},_setShowHeader:function(a){var b=this.headerNode;this.showHeader=a;o(b,(a?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();if(a)b.scrollLeft=this.getScrollPosition().x},setShowHeader:function(a){p.deprecated("setShowHeader(...)",'use set("showHeader", ...) instead',"dgrid 1.0");this.set("showHeader",a)},_setShowFooter:function(a){this.showFooter=a;o(this.footerNode,(a?"!":".")+"dgrid-footer-hidden");this.resize()}})})},
"dgrid/util/misc":function(){define("dgrid/util/misc",[],function(){var s={defaultDelay:15,throttle:function(p,q,f){var c=!1,f=f||s.defaultDelay;return function(){c||(c=!0,p.apply(q,arguments),setTimeout(function(){c=!1},f))}},throttleDelayed:function(p,q,f){var c=!1,f=f||s.defaultDelay;return function(){if(!c){c=!0;var i=arguments;setTimeout(function(){c=!1;p.apply(q,i)},f)}}},debounce:function(p,q,f){var c,f=f||s.defaultDelay;return function(){c&&(clearTimeout(c),c=null);var i=arguments;c=setTimeout(function(){p.apply(q,
i)},f)}}};return s})},"xstyle/has-class":function(){define("xstyle/has-class",["dojo/has"],function(s){var p={};return function(){for(var q,f=arguments,c=0;c<f.length;c++)if(q=f[c],!p[q]){p[q]=!0;var i=q.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),t=s(i[2]),k=-i[4];if((0<k?k<=t&&(-i[5]||k)>=t:!!t)==!i[1])document.documentElement.className+=" has-"+q}}})},"xstyle/css":function(){define("xstyle/css",["require"],function(s){var p=window.cssCache||(window.cssCache={});return{load:function(q,f,c){var i=
f.toUrl(q);if(p[i])return createStyleSheet(p[i]);var t=document.documentElement,k=t.insertBefore(document.createElement("div"),t.firstChild);k.id=f.toAbsMid(q).replace(/\//g,"-").replace(/\..*/,"")+"-loaded";q=(k.currentStyle||getComputedStyle(k,null)).display;t.removeChild(k);if("none"==q)return c();s(["./load-css"],function(k){k(i,c)})},pluginBuilder:"xstyle/css-builder"}})},"dgrid/OnDemandList":function(){define("dgrid/OnDemandList","./List,./_StoreMixin,dojo/_base/declare,dojo/_base/lang,dojo/_base/Deferred,dojo/on,./util/misc,put-selector/put".split(","),
function(s,p,q,f,c,i,t,k){return q([s,p],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,rowHeight:22,queryRowsOverlap:1,pagingDelay:t.defaultDelay,postCreate:function(){this.inherited(arguments);var c=this;i(this.bodyNode,"scroll",t.throttleDelayed(function(d){c._processScroll(d)},null,this.pagingDelay))},renderQuery:function(o,d,b){var a={query:o,count:0,node:d,options:b};if(!d){var l={node:k(this.contentNode,"div.dgrid-preload",{rowIndex:0}),count:0,
query:o,next:a,options:b};a.node=d=k(this.contentNode,"div.dgrid-preload");a.previous=l}d.rowIndex=this.minRowsPerPage;(l=this.preload)?((a.next=l.next)&&this.bodyNode.scrollTop>=l.node.offsetTop?a.previous=l:(a.next=l,a.previous=l.previous),a.previous.next=a,a.next.previous=a):this.preload=a;var g=k(d,"-div.dgrid-loading");k(g,"div.dgrid-below").innerHTML=this.loadingMessage;var b=f.mixin(this.get("queryOptions"),b,{start:0,count:this.minRowsPerPage,query:o}),e=o(b),r=this;c.when(this.renderArray(e,
d,b),function(b){return c.when(e.total||e.length,function(e){k(g,"!");var c=b.length,e=e||c;if(!e)r.noDataNode=k(r.contentNode,"div.dgrid-no-data"),r.noDataNode.innerHTML=r.noDataMessage;for(var f=0,j=0;j<c;j++)f+=r._calcRowHeight(b[j]);if(c&&f)r.rowHeight=f/c;e-=c;a.count=e;d.rowIndex=c;e?d.style.height=Math.min(e*r.rowHeight,r.maxEmptySpace)+"px":d.style.display="none";r._processScroll();return b})});return e},refresh:function(){this.inherited(arguments);if(this.store){var c=this;this._trackError(function(){return c.renderQuery(function(d){return c.store.query(c.query,
d)})})}},_calcRowHeight:function(c){var d=c.previousSibling;return d&&d.offsetTop!=c.offsetTop?c.offsetHeight:0},lastScrollTop:0,_processScroll:function(o){function d(j,h,d,g){var e=a.farOffRemoval,c=j.node;if(h>2*e){for(var f,l=c[d],n=0,o=0,r=[];f=l;){var m=a._calcRowHeight(f);if(n+m+e>h||0>l.className.indexOf("dgrid-row")&&0>l.className.indexOf("dgrid-loading"))break;var l=f[d],i,x=f.observerIndex;if(x!=i&&-1<i){var u=a.observers,p=u[i];p&&p.cancel();u[i]=0}n+=m;o+=f.count||1;i=x;a.removeRow(f,
!0);r.push(f)}j.count+=o;g?(c.rowIndex-=o,b(j)):c.style.height=c.offsetHeight+n+"px";for(var q=k("div"),j=0;j<r.length;j++)k(q,r[j]);setTimeout(function(){k(q,"!")},1)}}function b(b,j){b.node.style.height=Math.min(b.count*a.rowHeight,j?Infinity:a.maxEmptySpace)+"px"}var a=this,l=a.bodyNode,o=o&&o.scrollTop||l.scrollTop,g=l.offsetHeight+o,e,r,n=a.preload,m=a.lastScrollTop,i=a.bufferRows*a.rowHeight,p=i-a.rowHeight;for(a.lastScrollTop=o;n&&!n.node.offsetWidth;)n=n.previous;for(;n&&n!=e;){e=a.preload;
a.preload=n;r=n.node;var j=r.offsetTop;if(g+1+p<j){do n=n.previous;while(n&&!n.node.offsetWidth)}else if(o-1-p>j+r.offsetHeight){do n=n.next;while(n&&!n.node.offsetWidth)}else{var h=((r.rowIndex?o-i:g)-j)/a.rowHeight,j=(g-o+2*i)/a.rowHeight,x=Math.max(Math.min((o-m)*a.rowHeight,a.maxRowsPerPage/2),a.maxRowsPerPage/-2),j=j+Math.min(Math.abs(x),10);0==r.rowIndex&&(h-=j);h=Math.max(h,0);10>h&&0<h&&j+h<a.maxRowsPerPage&&(j+=Math.max(0,h),h=0);j=Math.min(Math.max(j,a.minRowsPerPage),a.maxRowsPerPage,n.count);
if(0==j)break;var j=Math.ceil(j),h=Math.min(Math.floor(h),n.count-j),u=f.mixin(a.get("queryOptions"),n.options);n.count-=j;var q=r,A,C=a.queryRowsOverlap;if(x=0<r.rowIndex&&n){var s=n.previous;s&&(d(s,o-(s.node.offsetTop+s.node.offsetHeight),"nextSibling"),0<h&&s.node==r.previousSibling?(h=Math.min(n.count,h),n.previous.count+=h,b(n.previous,!0),n.count-=h,r.rowIndex+=h,C=0):j+=h);u.start=r.rowIndex-C;r.rowIndex+=j}else{if(n.next)d(n.next,n.next.node.offsetTop-g,"previousSibling",!0),q=r.nextSibling,
q==n.next.node?(n.next.count+=n.count-h,n.next.node.rowIndex=h+j,b(n.next),n.count=h,C=0):A=!0;u.start=n.count}u.count=Math.min(j+C,a.maxRowsPerPage);if(A)A=q.offsetTop;b(n);r=k(q,"-div.dgrid-loading[style=height:"+j*a.rowHeight+"px]");k(r,"div.dgrid-"+(x?"below":"above")).innerHTML=a.loadingMessage;r.count=j;u.query=n.query;var t=n.query(u);if(void 0===a._trackError(function(){return t}))break;(function(j,h,d,g,e){c.when(a.renderArray(e,j,u),function(){q=j.nextSibling;k(j,"!");if(g&&q){var h=a.getScrollPosition();
a.scrollTo({x:h.x,y:h.y+q.offsetTop-g,preserveMomentum:!0})}d&&c.when(e.total||e.length,function(a){d.count=a-d.node.rowIndex;b(d)});a._processScroll()})}).call(this,r,l,x,A,t);n=n.previous}}}})})},"dgrid/_StoreMixin":function(){define("dgrid/_StoreMixin","dojo/_base/kernel,dojo/_base/declare,dojo/_base/lang,dojo/_base/Deferred,dojo/on,put-selector/put".split(","),function(s,p,q,f,c,i){function t(k){"object"!==typeof k&&(k=Error(k));k.grid=this;c.emit(this.domNode,"dgrid-error",{grid:this,error:k,
cancelable:!0,bubbles:!0})&&console.error(k)}return p(null,{store:null,query:null,queryOptions:null,getBeforePut:!0,noDataMessage:"",loadingMessage:"",constructor:function(){this.query={};this.queryOptions={};this.dirty={};this._updating={}},_configColumn:function(c){if(c.set){if(!this._columnsWithSet)this._columnsWithSet={};this._columnsWithSet[c.field]=c}},_configColumns:function(){this._columnsWithSet=null;return this.inherited(arguments)},_setStore:function(c,f,d){this.store=c;this.dirty={};this.set("query",
f,d)},_setQuery:function(c,f){var d=f&&f.sort;this.query=void 0!==c?c:this.query;this.queryOptions=f||this.queryOptions;d?this.set("sort",d):this.refresh()},setStore:function(c,f,d){s.deprecated("setStore(...)",'use set("store", ...) instead',"dgrid 1.0");this.set("store",c,f,d)},setQuery:function(c,f){s.deprecated("setQuery(...)",'use set("query", ...) instead',"dgrid 1.0");this.set("query",c,f)},_getQueryOptions:function(){var c=q.delegate(this.queryOptions,{});if(this._sort.length)c.sort=this._sort;
return c},_getQuery:function(){var c=this.query;return"object"==typeof c&&null!=c?q.delegate(c,{}):c},_setSort:function(c,f){if(this.store)this._lastCollection=null;this.inherited(arguments)},insertRow:function(c,f,d,b,a){var l=this.store,g=this.dirty,l=l&&l.getIdentity(c),e;l in g&&!(l in this._updating)&&(e=g[l]);e&&(c=q.delegate(c,e));return this.inherited(arguments)},updateDirty:function(c,f,d){var b=this.dirty,a=b[c];a||(a=b[c]={});a[f]=d},setDirty:function(c,f,d){s.deprecated("setDirty(...)",
"use updateDirty() instead","dgrid 1.0");this.updateDirty(c,f,d)},save:function(){function c(a,g){return function(c){var e=i._columnsWithSet,j=i._updating,h,l;for(h in g)c[h]=g[h];if(e)for(h in e)l=e[h].set(c),void 0!==l&&(c[h]=l);j[a]=!0;return f.when(d.put(c),function(){delete b[a];delete j[a]})}}var i=this,d=this.store,b=this.dirty,a=new f,l=a.promise,g=function(a){var b;return i.getBeforePut||!(b=i.row(a).data)?function(){return d.get(a)}:function(){return b}},e;for(e in b)var r=c(e,b[e]),l=l.then(g(e)).then(r);
a.resolve();return l},revert:function(){this.dirty={};this.refresh()},_trackError:function(c){var i;"string"==typeof c&&(c=q.hitch(this,c));try{i=c()}catch(d){t.call(this,d)}return f.when(i,null,q.hitch(this,t))},newRow:function(){this.noDataNode&&(i(this.noDataNode,"!"),delete this.noDataNode);return this.inherited(arguments)},removeRow:function(c,f){var d={element:c};if(!f&&this.noDataMessage&&this.up(d).element===c&&this.down(d).element===c)this.noDataNode=i(this.contentNode,"div.dgrid-no-data"),
this.noDataNode.innerHTML=this.noDataMessage;return this.inherited(arguments)}})})},"dgrid/Keyboard":function(){define("dgrid/Keyboard","dojo/_base/declare,dojo/aspect,dojo/on,./List,dojo/_base/lang,dojo/has,put-selector/put,dojo/_base/Deferred,dojo/_base/sniff".split(","),function(s,p,q,f,c,i,t,k){var o={checkbox:1,radio:1,button:1},d=/\bdgrid-cell\b/,b=/\bdgrid-row\b/;i.add("dom-contains",function(){return!!document.createElement("a").contains});return s(null,{pageSkip:10,tabIndex:0,postCreate:function(){function a(a){var b=
a.target;return b.type&&(!o[b.type]||32==a.keyCode)}function f(e){function l(a,b,h){var d=g.cellNavigation?"cell":"row",e=g[d](a);if(a=e&&e.element){b=c.mixin({grid:g},b);if(b.type)b.parentType=b.type;if(!b.bubbles)b.bubbles=!0;t(m,"!dgrid-focus[!tabIndex]");if(m){if(8>i("ie"))m.style.position="";b[d]=g[d](m);q.emit(a,"dgrid-cellfocusout",b)}m=a;b[d]=e;if(!h){if(8>i("ie"))a.style.position="relative";a.tabIndex=g.tabIndex;a.focus()}t(a,".dgrid-focus");q.emit(m,"dgrid-cellfocusin",b)}}for(var n=g.cellNavigation?
d:b,m=e,o;(o=m.firstChild)&&!n.test(o.className);)m=o;o&&(m=o);if(e===g.contentNode)p.after(g,"renderArray",function(a){return k.when(a,function(a){if(n.test(m.className)&&(i("dom-contains")?e.contains(m):e.compareDocumentPosition(m)&8))return a;for(var b=0,c=e.getElementsByTagName("*"),d;d=c[b];++b)if(n.test(d.className)){m=d;break}m.tabIndex=g.tabIndex;return a})});else if(n.test(m.className))m.tabIndex=g.tabIndex;q(e,"mousedown",function(b){a(b)||l(b.target,b)});q(e,"keydown",function(b){if(!b.metaKey&&
!b.altKey){var j=b.keyCode;if(!a(b)){var d={32:0,33:-g.pageSkip,34:g.pageSkip,37:-1,38:-1,39:1,40:1,35:1E4,36:-1E4}[j];if(!isNaN(d)){var c,e=g.cell(m);if(37==j||39==j){if(!g.cellNavigation)return;j="right"}else j="down",c=e&&e.column&&e.column.id,e=g.row(m);d&&(e=e&&g[j](e,d,!0));if(d=e&&e.element){if(c)d=g.cell(d,c).element;if(g.cellNavigation){c=d.getElementsByTagName("input");for(var f,e=0;e<c.length;e++)if(j=c[e],(-1!=j.tabIndex||"lastValue"in j)&&!j.disabled){if(8>i("ie"))j.style.position="relative";
j.focus();if(8>i("ie"))j.style.position="";f=!0;break}}l(d,b,f)}b.preventDefault()}}}});return function(a){a=a||m;l(a,{target:a})}}this.inherited(arguments);var g=this;if(this.tabableHeader)this.focusHeader=f(this.headerNode);this.focus=f(this.contentNode)}})})},"dgrid/Selection":function(){define("dgrid/Selection","dojo/_base/kernel,dojo/_base/declare,dojo/_base/Deferred,dojo/on,dojo/has,dojo/aspect,./List,dojo/has!touch?./util/touch,put-selector/put,dojo/query".split(","),function(s,p,q,f,c,i,t,
k,o){var d=c("mac")?"metaKey":"ctrlKey";return p(null,{selectionDelegate:".dgrid-row",selectionEvents:"mousedown,mouseup,dgrid-cellfocusin",deselectOnRefresh:!0,allowSelectAll:!1,create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._initSelectionEvents()},selection:{},selectionMode:"extended",_setSelectionMode:function(b){if(b!=this.selectionMode)this.clearSelection(),this.selectionMode=b},setSelectionMode:function(b){s.deprecated("setSelectionMode(...)",
'use set("selectionMode", ...) instead',"dgrid 1.0");this.set("selectionMode",b)},_handleSelect:function(b,a){if(!("none"==this.selectionMode||"dgrid-cellfocusin"==b.type&&"mousedown"==b.parentType||"mouseup"==b.type&&a!=this._waitForMouseUp)){this._waitForMouseUp=null;this._selectionTriggerEvent=b;var c=!b.keyCode?b[d]:b.ctrlKey;if(!b.keyCode||!b.ctrlKey||32==b.keyCode){var g=this.selectionMode,e=this.row(a),f=this._lastSelected;if("single"==g)f===a?this.select(a,null,!c||!this.isSelected(a)):(this.clearSelection(),
this.select(a),this._lastSelected=a);else if(this.selection[e.id]&&!b.shiftKey&&"mousedown"==b.type)this._waitForMouseUp=a;else{var i;(2!=b.button&&"extended"==g&&!c||2==b.button&&!this.selection[e.id])&&this.clearSelection(e.id,!0);b.shiftKey||(f=i=c?null:void 0);this.select(a,f,i);if(!f)this._lastSelected=a}!b.keyCode&&(b.shiftKey||c)&&b.preventDefault()}this._selectionTriggerEvent=null}},_initSelectionEvents:function(){function b(b){a._handleSelect(b,this)}var a=this,l=this.selectionDelegate;f(this.domNode,
"selectstart",function(a){var b=a.target&&a.target.tagName;"INPUT"!=b&&"TEXTAREA"!=b&&a.preventDefault()});c("touch")?f(this.contentNode,k.selector(l,k.tap),function(b){a._handleSelect(b,this)}):f(this.contentNode,f.selector(l,this.selectionEvents),b);if(this.allowSelectAll)this.on("keydown",function(b){b[d]&&65==b.keyCode&&(b.preventDefault(),a[a.allSelected?"clearSelection":"selectAll"]())});i.before(this,"removeRow",function(a,b){var c;b||(c=this.row(a))&&c.id in this.selection&&this.deselect(a)})},
allowSelect:function(){return!0},_selectionEventQueue:function(b,a){var c=this,d="dgrid-"+(b?"select":"deselect"),e=this[d],i=this._selectionTriggerEvent;if(i)i=i.type;if(e)return e;setTimeout(this._fireSelectionEvent=function(){if(e){var b={bubbles:!0,grid:c};if(i)b.parentType=i;b[a]=e;f.emit(c.contentNode,d,b);e=null;delete c[d]}},0);return e=this[d]=[]},select:function(b,a,c){void 0===c&&(c=!0);b.element||(b=this.row(b));if(this.allowSelect(b)){var d=this.selection,e=d[b.id];null===c&&(c=!e);var f=
b.element;!c&&!this.allSelected?delete this.selection[b.id]:d[b.id]=c;f&&(c?o(f,".dgrid-selected.ui-state-active"):o(f,"!dgrid-selected!ui-state-active"));c!=e&&f&&this._selectionEventQueue(c,"rows").push(b);if(a){a.element||(a=this.row(a));a=a.element;c=b.element;for(c=a&&(a.compareDocumentPosition?2==a.compareDocumentPosition(c):a.sourceIndex>c.sourceIndex)?"down":"up";b.element!=a&&(b=this[c](b));)this.select(b)}}},deselect:function(b,a){this.select(b,a,!1)},clearSelection:function(b,a){this.allSelected=
!1;for(var c in this.selection)b!==c&&this.deselect(c);if(!a)this._lastSelected=null},selectAll:function(){this.allSelected=!0;this.selection={};for(var b in this._rowIdToObject)this.select(this.row(this._rowIdToObject[b]).id)},isSelected:function(b){if(!b)return!1;b.element||(b=this.row(b));return!!this.selection[b.id]},refresh:function(){this.deselectOnRefresh&&(this.clearSelection(),this._fireSelectionEvent&&this._fireSelectionEvent());this._lastSelected=null;this.inherited(arguments)},renderArray:function(){var b=
this,a=this.inherited(arguments);q.when(a,function(a){var c=b.selection,d,f,i;for(d=0;d<a.length;d++)f=b.row(a[d]),(i=f.id in c?c[f.id]:b.allSelected)&&b.select(f,null,i)});return a}})})},"dgrid/editor":function(){define("dgrid/editor","dojo/_base/kernel,dojo/_base/lang,dojo/_base/array,dojo/_base/Deferred,dojo/on,dojo/aspect,dojo/has,./Grid,put-selector/put,dojo/_base/sniff".split(","),function(s,p,q,f,c,i,t,k,o){function d(a,b){a.value=b;if("radio"==a.type||"checkbox"==a.type)a.checked=!!b}function b(a,
b){if("number"==typeof b)a=isNaN(a)?a:parseFloat(a);else if("boolean"==typeof b)a="true"==a?!0:"false"==a?!1:a;else if(b instanceof Date)var c=new Date(a),a=isNaN(c.getTime())?a:c;return a}function a(a,b,e,f,g){var i,k,n;if(!(e>=f&&e<=f)&&(i=a.cell(b),k=i.row,n=i.column,n.field&&k)){i={grid:a,cell:i,rowId:k.id,oldValue:e,value:f,bubbles:!0,cancelable:!0};if(g&&g.type)i.parentType=g.type;if(c.emit(b,"dgrid-datachange",i))a.updateDirty&&(a.updateDirty(k.id,n.field,f),n.autoSave&&setTimeout(function(){a._trackError("save")},
0));else{var l;(l=b.widget)?(l._dgridIgnoreChange=!0,l.set("value",e),setTimeout(function(){l._dgridIgnoreChange=!1},0)):(l=b.input)&&d(l,e);return e}}return f}function l(c,d,e,f){if(!e.isValid||e.isValid())c=a(c,(e.domNode||e).parentNode,m?v:e._dgridLastValue,"function"==typeof e.get?b(e.get("value")):b(e["checkbox"==e.type||"radio"==e.type?"checked":"value"]),f),m?v=c:e._dgridLastValue=c}function g(a){var b=a.editor,d=a.editOn,e=a.grid,f="string"!=typeof b,g,i,k;g=a.editorArgs||{};"function"==typeof g&&
(g=g.call(e,a));if(f)i=new b(g),f=i.focusNode||i.domNode,f.className+=" dgrid-input",i.connect(i,d?"onBlur":"onChange",function(){i._dgridIgnoreChange||l(e,a,this,{type:"widget"})});else{k=function(b){var c=b.target;"_dgridLastValue"in c&&-1<c.className.indexOf("dgrid-input")&&l(e,a,c,b)};if(!a.grid._hasInputListener)e._hasInputListener=!0,e.on("change",function(a){k(a)});i=f=o(("textarea"==b?"textarea":"input[type="+b+"]")+".dgrid-input",p.mixin({name:a.field,tabIndex:isNaN(a.tabIndex)?-1:a.tabIndex},
g));if(9>t("ie")||t("ie")&&0)"radio"==b||"checkbox"==b?c(i,"click",function(a){k(a)}):c(i,"change",function(a){k(a)})}c(f,"mousedown",function(a){a.stopPropagation()});return i}function e(a){var b=g(a),e=b.domNode||b,f=b.focusNode||e,i=b.domNode?function(){b.set("value",b._dgridLastValue)}:function(){d(b,b._dgridLastValue);l(a.grid,a,b)};c(f,"keydown",function(c){c=c.keyCode||c.which;27==c?(i(),v=b._dgridLastValue,f.blur()):13==c&&!1!==a.dismissOnEnter&&f.blur()});(a._editorBlurHandle=c.pausable(b,
"blur",function(){var b=e.parentNode;a.grid.cell(e);var c=b.children.length-1,d={alreadyHooked:!0};for(b.removeChild(e);c--;)o(b.firstChild,"!");k.appendIfNode(b,a.renderCell(a.grid.row(b).data,v,b,w?p.delegate(d,w):d));m=v=w=null;a._editorBlurHandle.pause()})).pause();return b}function r(a,b,c,e){(b=a.domNode)||d(a,e);c.innerHTML="";o(c,a.domNode||a);if(b)a._started||a.startup(),a._dgridIgnoreChange=!0,a.set("value",e),setTimeout(function(){a._dgridIgnoreChange=!1},0);a._dgridLastValue=e;m&&(v=e)}
function n(a){var b,c,d,e,g,i;a.column||(a=this.cell(a));b=a.column;e=b.field;c=a.element.contents||a.element;if(g=b.editorInstance){if(m!=c&&(!b.canEdit||b.canEdit(a.row.data,d)))return m=c,a=a.row,d=(d=this.dirty&&this.dirty[a.id])&&e in d?d[e]:b.get?b.get(a.data):a.data[e],r(b.editorInstance,b,c,d),i=new f,setTimeout(function(){g.focus&&g.focus();b._editorBlurHandle&&b._editorBlurHandle.resume();i.resolve(g)},0),i.promise}else if(b.editor&&(g=c.widget||c.input))return i=new f,g.focus&&g.focus(),
i.resolve(g),i.promise;return null}var m,v,w;return function(a,b,d){var f=a.renderCell||k.defaultRenderCell,l=[],m;a||(a={});a.editor=b=b||a.editor||"text";a.editOn=d=d||a.editOn;m="string"!=typeof b;if(a.widgetArgs)s.deprecated("column.widgetArgs","use column.editorArgs instead","dgrid 1.0"),a.editorArgs=a.widgetArgs;i.after(a,"init",d?function(){var b=a.grid;if(!b.edit)b.edit=n;a.editorInstance=e(a,f)}:function(){var b=a.grid;if(!b.edit)b.edit=n;m&&l.push(i.before(b,"removeRow",function(c){c=b.cell(c,
a.id).element;(c=(c.contents||c).widget)&&c.destroyRecursive()}))});i.after(a,"destroy",function(){q.forEach(l,function(a){a.remove()});a._editorBlurHandle&&a._editorBlurHandle.remove();d&&m&&a.editorInstance.destroyRecursive()});a.renderCell=d?function(b,e,g,h){if(!h||!h.alreadyHooked)c("TD"==g.tagName?g:g.parentNode,d,function(){w=h;a.grid.edit(this)});return f.call(a,b,e,g,h)}:function(b,c,d,e){if(!a.canEdit||a.canEdit(b,c))b=g(a),r(b,a,d,c),d[m?"widget":"input"]=b;else return f.call(a,b,c,d,e)};
return a}})},"moment/moment":function(){define("moment/moment",[],function(){function s(a,b,c,d){var e=c.lang();return e[a].call?e[a](c,d):e[a][b]}function p(a,b){return function(c){return t(a.call(this,c),b)}}function q(a){return function(b){b=a.call(this,b);return b+this.lang().ordinal(b)}}function f(a,b,c){this._d=a;this._isUTC=!!b;this._a=a._a||null;this._lang=c||!1}function c(a){var b=this._data={},c=a.years||a.y||0,d=a.months||a.M||0,e=a.weeks||a.w||0,f=a.days||a.d||0,g=a.hours||a.h||0,h=a.minutes||
a.m||0,j=a.seconds||a.s||0,a=a.milliseconds||a.ms||0;this._milliseconds=a+1E3*j+6E4*h+36E5*g;this._days=f+7*e;this._months=d+12*c;b.milliseconds=a%1E3;j+=i(a/1E3);b.seconds=j%60;h+=i(j/60);b.minutes=h%60;g+=i(h/60);b.hours=g%24;f+=i(g/24);f+=7*e;b.days=f%30;d+=i(f/30);b.months=d%12;c+=i(d/12);b.years=c;this._lang=!1}function i(a){return 0>a?Math.ceil(a):Math.floor(a)}function t(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function k(a,b,c){var d=b._milliseconds,e=b._days,b=b._months;d&&a._d.setTime(+a+
d*c);e&&a.date(a.date()+e*c);b&&(d=a.date(),a.date(1).month(a.month()+b*c).date(Math.min(d,a.daysInMonth())))}function o(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a,b){var c=Math.min(a.length,b.length),d=Math.abs(a.length-b.length),e=0,f;for(f=0;f<c;f++)~~a[f]!==~~b[f]&&e++;return e+d}function b(a,b,c,d){var e,f=[];for(e=0;7>e;e++)f[e]=a[e]=null==a[e]?2===e?1:0:a[e];a[7]=f[7]=b;null!=a[8]&&(f[8]=a[8]);a[3]+=c||0;a[4]+=d||0;c=new Date(0);b?(c.setUTCFullYear(a[0],a[1],
a[2]),c.setUTCHours(a[3],a[4],a[5],a[6])):(c.setFullYear(a[0],a[1],a[2]),c.setHours(a[3],a[4],a[5],a[6]));c._a=f;return c}function a(a,b){var c,d,e=[];!b&&C&&(b=require("./lang/"+a));for(c=0;c<B.length;c++)b[B[c]]=b[B[c]]||z.en[B[c]];for(c=0;12>c;c++)d=h([2E3,c]),e[c]=RegExp("^"+(b.months[c]||b.months(d,""))+"|^"+(b.monthsShort[c]||b.monthsShort(d,"")).replace(".",""),"i");b.monthsParse=b.monthsParse||e;return z[a]=b}function l(b){return(b="string"===typeof b&&b||b&&b._lang||null)?z[b]||a(b):h}function g(a){var b=
a.match(I),c,d;for(c=0,d=b.length;c<d;c++)b[c]=y[b[c]]?y[b[c]]:b[c].match(/\[.*\]/)?b[c].replace(/^\[|\]$/g,""):b[c].replace(/\\/g,"");return function(e){var f="";for(c=0;c<d;c++)f+="function"===typeof b[c].call?b[c].call(e,a):b[c];return f}}function e(a,b){function c(b){return a.lang().longDateFormat[b]||b}for(var d=5;d--&&J.test(b);)b=b.replace(J,c);G[b]||(G[b]=g(b));return G[b](a)}function r(a){switch(a){case "DDDD":return Q;case "YYYY":return R;case "S":case "SS":case "SSS":case "DDD":return P;
case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":case "a":case "A":return S;case "Z":case "ZZ":return D;case "T":return T;case "MM":case "DD":case "YY":case "HH":case "hh":case "mm":case "ss":case "M":case "D":case "d":case "H":case "h":case "m":case "s":return N;default:return RegExp(a.replace("\\",""))}}function n(a,c){var d=[0,0,1,0,0,0,0],e={tzh:0,tzm:0},f=c.match(I),g,h;for(g=0;g<f.length;g++)if((h=(r(f[g]).exec(a)||[])[0])&&(a=a.slice(a.indexOf(h)+h.length)),y[f[g]]){var i=d,j=e,k=void 0,
n=void 0;switch(f[g]){case "M":case "MM":i[1]=null==h?0:~~h-1;break;case "MMM":case "MMMM":for(k=0;12>k;k++)if(l().monthsParse[k].test(h)){i[1]=k;n=!0;break}n||(i[8]=!1);break;case "D":case "DD":case "DDD":case "DDDD":null!=h&&(i[2]=~~h);break;case "YY":i[0]=~~h+(70<~~h?1900:2E3);break;case "YYYY":i[0]=~~Math.abs(h);break;case "a":case "A":j.isPm="pm"===(h+"").toLowerCase();break;case "H":case "HH":case "h":case "hh":i[3]=~~h;break;case "m":case "mm":i[4]=~~h;break;case "s":case "ss":i[5]=~~h;break;
case "S":case "SS":case "SSS":i[6]=~~(1E3*("0."+h));break;case "Z":case "ZZ":j.isUTC=!0;if((k=(h+"").match(V))&&k[1])j.tzh=~~k[1];if(k&&k[2])j.tzm=~~k[2];if(k&&"+"===k[0])j.tzh=-j.tzh,j.tzm=-j.tzm}null==h&&(i[8]=!1)}e.isPm&&12>d[3]&&(d[3]+=12);!1===e.isPm&&12===d[3]&&(d[3]=0);return b(d,e.isUTC,e.tzh,e.tzm)}function m(a,b,c,d,e){e=e.relativeTime[a];return"function"===typeof e?e(b||1,!!c,a,d):e.replace(/%d/i,b||1)}function v(a,b){h.fn[a]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+
c+b](a),this):this._d["get"+c+b]()}}function w(a){h.duration.fn[a]=function(){return this._data[a]}}function j(a,b){h.duration.fn["as"+a]=function(){return+this/b}}for(var h,x=Math.round,u,z={},A="en",C="undefined"!==typeof module&&module.exports,B="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),O=/^\/?Date\((\-?\d+)/i,I=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,
J=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,H=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,N=/\d\d?/,P=/\d{1,3}/,Q=/\d{3}/,R=/\d{1,4}/,S=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,D=/Z|[\+\-]\d\d:?\d\d/i,T=/T/i,U=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,K=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],V=/([\+\-]|\d\d)/gi,E="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),
F={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},G={},L="DDD w M D d".split(" "),M="M D H h m s w".split(" "),y={M:function(){return this.month()+1},MMM:function(a){return s("monthsShort",this.month(),this,a)},MMMM:function(a){return s("months",this.month(),this,a)},D:function(){return this.date()},DDD:function(){var a=new Date(this.year(),this.month(),this.date()),b=new Date(this.year(),0,1);return~~((a-b)/864E5+1.5)},d:function(){return this.day()},dd:function(a){return s("weekdaysMin",
this.day(),this,a)},ddd:function(a){return s("weekdaysShort",this.day(),this,a)},dddd:function(a){return s("weekdays",this.day(),this,a)},w:function(){var a=new Date(this.year(),this.month(),this.date()-this.day()+5),b=new Date(a.getFullYear(),0,4);return~~((a-b)/864E5/7+1.5)},YY:function(){return t(this.year()%100,2)},YYYY:function(){return t(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),
!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return t(~~(this.milliseconds()/10),2)},SSS:function(){return t(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+t(~~(a/60),2)+":"+t(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+t(~~(10*a/6),4)}};L.length;)u=L.pop(),
y[u+"o"]=q(y[u]);for(;M.length;)u=M.pop(),y[u+u]=p(y[u],2);y.DDDD=p(y.DDD,3);h=function(a,c){if(null===a||""===a)return null;var g;if(h.isMoment(a))return new f(new Date(+a._d),a._isUTC,a._lang);if(c)if(o(c)){var i=a.match(H)||[],j,k=99,l,m;for(l=0;l<c.length;l++)m=n(a,c[l]),j=e(new f(m),c[l]).match(H)||[],j=d(i,j),j<k&&(k=j,g=m)}else g=n(a,c);else if(g=O.exec(a),void 0===a)g=new Date;else if(g)g=new Date(+g[1]);else if(a instanceof Date)g=a;else if(o(a))g=b(a);else if("string"===typeof a)if(g="YYYY-MM-DDT",
U.exec(a)){for(i=0;4>i;i++)if(K[i][1].exec(a)){g+=K[i][0];break}g=D.exec(a)?n(a,g+" Z"):n(a,g)}else g=new Date(a);else g=new Date(a);return new f(g)};h.utc=function(a,c){if(o(a))return new f(b(a,!0),!0);"string"===typeof a&&!D.exec(a)&&(a+=" +0000",c&&(c+=" Z"));return h(a,c).utc()};h.unix=function(a){return h(1E3*a)};h.duration=function(a,b){var d=h.isDuration(a),e="number"===typeof a,f=d?a._data:e?{}:a;if(e)b?f[b]=a:f.milliseconds=a;e=new c(f);if(d)e._lang=a._lang;return e};h.humanizeDuration=function(a,
b,c){return h.duration(a,!0===b?null:b).humanize(!0===b?!0:c)};h.version="1.7.2";h.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";h.lang=function(b,c){var d;if(!b)return A;(c||!z[b])&&a(b,c);if(z[b]){for(d=0;d<B.length;d++)h[B[d]]=z[b][B[d]];h.monthsParse=z[b].monthsParse;A=b}};h.langData=l;h.isMoment=function(a){return a instanceof f};h.isDuration=function(a){return a instanceof c};h.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},
relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}});h.fn=f.prototype={clone:function(){return h(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1E3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},
toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds(),this.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?null!=this._a[8]?!!this._a[8]:!d(this._a,(this._a[7]?h.utc(this._a):h(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){this._isUTC=!0;return this},local:function(){this._isUTC=!1;return this},format:function(a){return e(this,a?a:h.defaultFormat)},add:function(a,b){var c=b?h.duration(+b,a):h.duration(a);k(this,
c,1);return this},subtract:function(a,b){var c=b?h.duration(+b,a):h.duration(a);k(this,c,-1);return this},diff:function(a,b,c){var a=this._isUTC?h(a).utc():h(a).local(),d=6E4*(this.zone()-a.zone()),d=this._d-a._d-d,e=this.year()-a.year(),f=this.month()-a.month(),a=this.date()-a.date(),b="months"===b?12*e+f+a/30:"years"===b?e+(f+a/30)/12:"seconds"===b?d/1E3:"minutes"===b?d/6E4:"hours"===b?d/36E5:"days"===b?d/864E5:"weeks"===b?d/6048E5:d;return c?b:x(b)},from:function(a,b){return h.duration(this.diff(a)).lang(this._lang).humanize(!b)},
fromNow:function(a){return this.from(h(),a)},calendar:function(){var a=this.diff(h().sod(),"days",!0),b=this.lang().calendar,c=b.sameElse,a=-6>a?c:-1>a?b.lastWeek:0>a?b.lastDay:1>a?b.sameDay:2>a?b.nextDay:7>a?b.nextWeek:c;return this.format("function"===typeof a?a.apply(this):a)},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<h([this.year()]).zone()||this.zone()<h([this.year(),5]).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():
this._d.getDay();return null==a?b:this.add({d:a-b})},startOf:function(a){switch(a.replace(/s$/,"")){case "year":this.month(0);case "month":this.date(1);case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}return this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?
0:this._d.getTimezoneOffset()},daysInMonth:function(){return h.utc([this.year(),this.month()+1,0]).date()},lang:function(a){if(void 0===a)return l(this);this._lang=a;return this}};for(u=0;u<E.length;u++)v(E[u].toLowerCase(),E[u]);v("year","FullYear");h.duration.fn=c.prototype={weeks:function(){return i(this.days()/7)},valueOf:function(){return this._milliseconds+864E5*this._days+2592E6*this._months},humanize:function(a){var b=+this,c=this.lang().relativeTime,d;d=!a;var e=this.lang(),f=x(Math.abs(b)/
1E3),g=x(f/60),h=x(g/60),i=x(h/24),j=x(i/365),f=45>f&&["s",f]||1===g&&["m"]||45>g&&["mm",g]||1===h&&["h"]||22>h&&["hh",h]||1===i&&["d"]||25>=i&&["dd",i]||45>=i&&["M"]||345>i&&["MM",x(i/30)]||1===j&&["y"]||["yy",j];f[2]=d;f[3]=0<b;f[4]=e;d=m.apply({},f);b=0>=b?c.past:c.future;a&&(d="function"===typeof b?b(d):b.replace(/%s/i,d));return d},lang:h.fn.lang};for(u in F)F.hasOwnProperty(u)&&(j(u,F[u]),w(u.toLowerCase()));j("Weeks",6048E5);return h})}}});
define("dote-client/viewAdmin","dojo/_base/array,dojo/_base/declare,dojo/ready,dojo/store/Cache,dojo/store/Memory,dgrid/OnDemandGrid,dgrid/Keyboard,dgrid/Selection,dgrid/editor,moment/moment,./store/JsonRest,./userControls,./widgetModules".split(","),function(s,p,q,f,c,i,t,k,o,d,b,a){var l=f(new b({target:"/users/"}),new c),g=f(new b({target:"/topics/"}),new c);q(function(){a.start();var b=[{field:"id",label:"User ID"},o({field:"admin",label:"Admin Flag",editor:"checkbox",editOn:"dblclick",autoSave:!0}),
{field:"owner",label:"Owner Flag"},{field:"lastLogin",label:"Last Login",get:function(a){return a.lastLogin?d.unix(a.lastLogin).format("DD/MM/YY HH:mm"):null}}];(new p([i,t,k]))({columns:b,store:l},"userGrid");b=[{field:"id",label:"ID",formatter:function(a){return'<a href="/topic/'+a+'" target="_blank">'+a+"</a>"}},{field:"title",label:"Title"},{field:"voters",sortable:!1,label:"Vote",get:function(a){var b=a.voters.length?0:null;s.forEach(a.voters,function(a){b+=a.vote});return 0<b&&null!==b?"+"+
b:b}},{field:"author",label:"Author"},{field:"created",label:"Created",get:function(a){return d.unix(a.created).format("DD/MM/YY HH:mm")}},o({field:"owner",label:"Owner",editor:"text",editOn:"dblclick",autoSave:!0}),{field:"action",label:"Action"},{field:"actioned",label:"Actioned",get:function(a){return a.actioned?d.unix(a.actioned).format("DD/MM/YY HH:mm"):null}},{field:"commentsCount",label:"Cmt"}];(new p([i,t,k]))({columns:b,store:g},"topicGrid")})});